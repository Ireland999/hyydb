define("searchresult:widget/imgShowOpt/init.js",function(e,i,t){var r=e("common:widget/ui/jquery/jquery.js"),n=e("common:widget/ui/EventEmitter/EventEmitter.js").eventCenter,s=e("searchresult:widget/ui/base/statisticPic/statisticPic.js"),o=e("searchresult:widget/ui/base/History/History.js"),a=e("searchresult:widget/ui/strategy/singleton/resultPullStrategyHostOpt/resultPullStrategyHostOpt.js");t.exports=function(){function e(e){var e=e||"ini";a.calc(e)}PDC&&PDC.mark("c_jsStart"),s.recITm(window.pageStartTime||new Date),s.ini();{var i,t,c=r(window),u=c.width();c.height()}n.on("view.displayed",function(){window.isFirstPageComplate=!0},this),setTimeout(function(){n.on("view.ini",e,this),n.on("morePage",function(){e("morePage")},this),n.on("view.displayed",function(){clearTimeout(t),t=setTimeout(function(){e("cacheImg")},100)},this),n.on("view.pageTurn",function(){e("pageTurn")},this),n.on("filter.resize",function(){n.trigger("beforeclear"),e("resize")},this),n.on("hash.fliterchange",function(){n.trigger("beforeclear"),e("imgFilter")},this),c.on("resize",function(){clearTimeout(i),i=setTimeout(function(){var i=c.width();if(!(Math.abs(u-i)<50)){var t=c.height();n.trigger("beforeclear"),e("resize"),u=i,n.trigger("resize",{viewWidth:i,viewHeight:t})}},200)});var r=new Date,s=function(){if(!window._disableScroll){var t=new Date;clearTimeout(i),t-r>700?(e("scroll"),r=t):i=setTimeout(function(){n.trigger("scroll"),e("scroll"),r=t,i=null},200)}};c.on("scroll",s),(window.isFirstPageComplate||window.ns&&ns.image&&ns.image.isFirstPageReady)&&(clearTimeout(t),t=setTimeout(function(){e("cacheImg")},100)),window.scrollTo(0,0),o.ini(),c.resize()},1e3)}});
;define("searchresult:widget/ui/fragment/PageImageLoad/PageImageLoad.js",function(t,e,r){var i=t("common:widget/ui/EventEmitter/EventEmitter.js").eventCenter,a=r.exports=function(){var t=[],e=function(){window.bdImgRecT=m,i.on("view.imgRenderStart",function(t){a(t.page,t)}),i.on("view.imgRenderSet",function(e){n(null,e,e.page);var r=t[e.page];"ini"===r.dispType&&1==e.page&&i.trigger("pms.page.start")}),i.on("view.checkLoad",function(e){var r=t[e.page];r&&r.dispNum<=5&&(r.ischache=!0,i.trigger("view.displayed"))}),i.on("view.base64Load",function(e){var r=t[e.page];r&&(r.base64RequestEnd=new Date,r.state64&&"done"!=r.state64||(r.state64=e.state))})},r=function(){var t=new Date;return{ischache:!1,tnStartTime:t,startPn:0,endPn:0,page:0,dispNum:0,t1Err:0,t1End:t,t1Num:0,t2Err:0,t2End:t,t2Num:0,t3Err:0,t3End:t,t3Num:0,tnErr:0,spaceImgNum:0,smallThumbImg:0,smallImg:0,dispType:"",hoverNum:0,largeNum:0,otherNum:0}},a=function(e,a){var m=t[e]=r();n(m,a,e),i.trigger("ajaxPms.page.start",{page:e})},n=function(e,r,i){if(e=e||t[i]){for(var a in e)void 0!==r[a]&&(e[a]=r[a]);e.thumbRenderStart=new Date}},m=function(e,r){var a=t[r];if(a){var n=parseInt(e.pn),m=a.dispType,s=e.self,u=a.startPn,d=a.endPn;if("error"==e.type){var g,o=s.getAttribute("bdsrc"),p=s.getAttribute("data-mid"),c=s.getAttribute("data-large"),h=s.getAttribute("data-hover");if(s.src!==h&&s.src!==p&&s.src!==c&&s.src!==o?g=c?c:p?p:o:s.src==h?g=c&&h!=c?c:p&&h!=p?p:o:s.src==p?g=o:s.src==c?(""==p&&(p=o),g=p):s.src==o&&h&&h!==o&&!s._hoverTried&&(g=h),g&&g===h&&(s._hoverTried=!0),g&&g!=s.src)return setTimeout(function(t,e){return function(){t.src=e}}(s,g),1),!1}else e.self.style.background="none",e.self.style.visibility="visible",0===n&&setTimeout(function(){i.trigger("firstthumb.load",{thumbURL:s.src,iwidth:s.getAttribute("data-width"),iheight:s.getAttribute("data-height")})},0);if(this.dispNum<0)return!1;n>=u&&d>=n&&(a.dispNum--,s.isDisplayed=!0);var l=e.self.src,v=e.self,E=v.getAttribute("data-hover"),f=v.getAttribute("data-large");switch(l){case E:a.hoverNum++;break;case f:a.largeNum++;break;default:a.otherNum++}if(0===l.indexOf("http://t1.baidu.com/")?"error"==e.type?(a.t1Err++,a.tnErr++):(a.t1End=new Date,a.t1Num++):0===l.indexOf("http://t2.baidu.com/")?"error"==e.type?(a.t2Err++,a.tnErr++):(a.t2End=new Date,a.t2Num++):0===l.indexOf("http://t3.baidu.com/")?"error"==e.type?(a.t3Err++,a.tnErr++):(a.t3End=new Date,a.t3Num++):"error"==e.type&&a.tnErr++,"error"==e.type&&a.dispNum>=0&&i.trigger("view.dispErr",e),a.dispNum<=5&&0==a.ischache&&(a.ischache=!0,i.trigger("view.displayed")),0==a.dispNum){var N=(new Date).getTime(),b=a.t1End-a.tnStartTime,T=a.t2End-a.tnStartTime,w=a.t3End-a.tnStartTime,y=N-a.tnStartTime,I=N-a.thumbRenderStart,S=a.base64RequestEnd-a.thumbRenderStart;i.trigger("view.dispOnload",{from:u,to:d,dispType:m,page:r,tm:y,tm2:I,tm64:S,state64:a.state64,spaceImgNum:a.spaceImgNum,smallImg:a.smallImg,smallThumbImg:a.smallThumbImg,t1Num:a.t1Num,t1Err:a.t1Err,t1Time:b,t2Num:a.t2Num,t2Err:a.t2Err,t2Time:T,t3Num:a.t3Num,t3Err:a.t3Err,t3Time:w,tnErr:a.tnErr,hoverNum:a.hoverNum,largeNum:a.largeNum,otherNum:a.otherNum}),"ini"!==a.dispType?i.trigger("ajaxPms.page.end",{page:r}):"ini"===a.dispType&&1==r&&i.trigger("pms.page.complete")}}};return{ini:e}}();a.ini()});
;define("searchresult:widget/ui/fragment/imageLocalStore/imageLocalStore.js",function(a,t,e){var r=a("common:widget/ui/jquery/jquery.js"),i=a("searchresult:widget/ui/base/utils/utils.js"),s=(a("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),a("searchresult:widget/ui/model/singleton/ImageDataManager/ImageDataManager.js")),o=s.options.REQUEST_IMG_COUNT,n=function(a,t){if(a=r.trim(a||""),t=parseInt(t),!isNaN(t)&&a){var e=s.getBlock(t,t,2);if(e&&!(e.length<1)){var i=e[0];s.getData(i*o,(i+1)*o-1,function(t){l(a,t)})}}},l=function(a,t){a=i.uncompile(a);var e={listNum:s.listNum,data:t};try{var r=JSON.stringify(e);localStorage.setItem(a,r)}catch(o){}};try{var c=window.localStorage}catch(u){var c=null}if(c&&window.JSON)try{localStorage.clear()}catch(u){}else n=l=function(){};e.exports=window.storeData=n});
;define("searchresult:widget/ui/base/utils/utils.js",function(t,e,i){BD=window.BD||{},BD.IMG=BD.IMG||{};var n=t("common:widget/ui/jquery/jquery.js");BD.IMG.utils=i.exports={};var r=BD.IMG.utils,o=0,u=360,a=100;BD.IMG.utils.getWidgetID=function(){return o++},BD.IMG.utils.compareObj=function(t,e){var i=!0;if("object"!=typeof t||"object"!=typeof e)i=t===e;else{var r={};r=n.extend(r,t),r=n.extend(r,e);for(var o in r)if(i=t[o]===e[o]?!0:"object"==typeof t[o]&&"object"==typeof e[o]?BD.IMG.utils.compareObj(t[o],e[o]):!1,!i)break}return i},BD.IMG.utils.str2dom=function(){var t;return function(e){return e?(t||(t=document.createElement("div")),t.innerHTML=e,t.childNodes[0]):!1}}(),BD.IMG.utils.codeCompiler=function(){var t={w:"a",k:"b",v:"c",1:"d",j:"e",u:"f",2:"g",i:"h",t:"i",3:"j",h:"k",s:"l",4:"m",g:"n",5:"o",r:"p",q:"q",6:"r",f:"s",p:"t",7:"u",e:"v",o:"w",8:"1",d:"2",n:"3",9:"4",c:"5",m:"6",0:"7",b:"8",l:"9",a:"0",_z2C$q:":","_z&e3B":".",AzdH3F:"/"},e=/([a-w\d])/g,i=/(_z2C\$q|_z&e3B|AzdH3F)/g;return{compile:function(t){if(!t)return"";for(var e=(t.charCodeAt(0)+t.length).toString(16),i=1;i<t.length;i++)e+="g"+(t.charCodeAt(i)+t.charCodeAt(i-1)).toString(16);return e},uncompile:function(n){if(!n)return"";var r=n.replace(i,function(e,i){return t[i]});return r.replace(e,function(e,i){return t[i]})},uncompileURL:function(t){return/^(http|https)/.test(t)?t:this.uncompile(t)}}}(),BD.IMG.utils.fmqValueSet=function(){var t=new Date;return function(){var e=r.query2Json(r.escapeXSS(window.location.search.substring(1))),i=t.getTime();if("undefined"==typeof e.fmq&&(e.fmq=""),void 0==e.fmq||""==e.fmq)e.fmq=i+"_R";else if(e.fmq.indexOf("m")>-1&&-1==e.fmq.indexOf("_m")&&-1==e.fmq.indexOf("_R")){var n=e.fmq;e.fmq=i+"_"+n+"_R"}else if(-1==e.fmq.indexOf("_R")){var n=e.fmq;e.fmq=n+"_R"}return e.fmq}}(),BD.IMG.utils.escapeXSS=function(t){return t.replace(/[<>]/g,function(t){return encodeURIComponent(t)}).replace(/"/g,"%22").replace(/'/g,"%27")},BD.IMG.utils.decodeURIComponent=function(t){try{return decodeURIComponent(t)}catch(e){return t}},BD.IMG.utils.json2Query=function(t){if(null==t||"object"!=typeof t)return t;var e=[];for(var i in t)""!=i&&(e[e.length]=i+"="+t[i]);return e.join("&")},BD.IMG.utils.query2Json=function(t){if(null==t||"string"!=typeof t)return t;for(var e={},i=t.split("&"),n=0,r=i.length;r>n;n++){var o=i[n].split("=");e[o[0]]=o[1]}return e},BD.IMG.utils.trim=function(t){if("string"==typeof t)return t.replace(/^\s*|\s*$/g,"");if("object"==typeof t){for(var e in t)t[e]=BD.IMG.utils.trim(t[e]);return t}return t},BD.IMG.utils.zoom=function(t,e,i){t=t||140,e=e||140,i=Math.min(Math.max(t,e),i);var n=i/t,r=i/e,o=e,u=t;return r>n?(u=i,o=e*n):(u=t*r,o=i),{width:u,height:o}},BD.IMG.utils.zoomLimit=function(t,e,i,n){var r=BD.IMG.utils.zoom(t,e,i),o=r.width,u=r.height;return n>0&&n>o&&(o=n,u=u*o/r.width),{width:parseInt(o),height:parseInt(u)}},BD.IMG.utils.zoomByHeightLimit=function(t,e,i,n,r){n=n||u,r=r||a,(0==t||0==e)&&(t=e=n);var o=e,f=BD.IMG.utils.zoomByHeight(t,e,i);if(f.width>t||f.width>n||f.width<r){var s=Math.min(n,Math.max(r,f.width));i=Math.min(e*s/t,i),o=i,t=s}else t=f.width,o=f.height;return{width:parseInt(t),height:parseInt(o)}},BD.IMG.utils.zoomByHeight=function(t,e,i){return(0==t||0==e)&&(t=e=220),i>e?(i=Math.min(e,i),t=i*t/e):t=i*t/e,{width:parseInt(t),height:parseInt(i)}},BD.IMG.utils.zoomLi=function(t,e){var i=t.iwidth||t.width||140,n=t.iheight||t.height||140;return maxWidth=t.maxWidth||u,minWidth=t.minWidth||a,2===t.hasLarge?BD.IMG.utils.zoomLimit(i,n,maxWidth,minWidth):BD.IMG.utils.zoomByHeightLimit(i,n,e)},BD.IMG.utils.zoomLiIE6=function(t){var e=t.iwidth||t.width||140,i=t.iheight||t.height||140;maxWidth=t.maxWidth||140,minWidth=t.minWidth||130;var n;return n=e>1.15*i&&0===t.hasLarge?BD.IMG.utils.zoomLimit(e,i,220,145):BD.IMG.utils.zoomLimit(e,i,140,130)},BD.IMG.utils.zoomImg=function(t,e){var i,e=e||u;return 2===t.hasLarge?i=BD.IMG.utils.zoom(t.iwidth,t.iheight,140):(i=BD.IMG.utils.zoomByHeight(t.iwidth,t.iheight,Math.min(t.lineH,t.iheight)),i=BD.IMG.utils.zoom(i.width,i.height,e)),i},r.zoomLimitMax=function(t,e,i,n){(isNaN(t)||1>t)&&(t=i),(isNaN(e)||1>e)&&(e=n);var r,o,u,a;return t>=e?(r=Math.min(t,i),o=r*e/t):(o=Math.min(e,n),r=o*t/e),u=(i-r)/2,a=(n-o)/2,{width:parseInt(r),height:parseInt(o),left:parseInt(u),top:parseInt(a)}},BD.IMG.utils.zoomImgIE6=function(t){var e,i=parseInt(t.liWidth);return e=2===t.hasLarge?BD.IMG.utils.zoom(t.iwidth,t.iheight,140):t.iwidth>=t.iheight?i>190?BD.IMG.utils.zoom(t.iwidth,t.iheight,220):i>150?BD.IMG.utils.zoom(t.iwidth,t.iheight,170):BD.IMG.utils.zoom(t.iwidth,t.iheight,140):BD.IMG.utils.zoomByHeight(t.iwidth,t.iheight,170)},BD.IMG.utils.getOffsetTop=function(t){var e=0;return e=t.offsetTop,t.offsetParent&&t.offsetParent!=t&&"BODY"!=t.offsetParent.nodeName&&(e+=BD.IMG.utils.getOffsetTop(t.offsetParent)),e},BD.IMG.utils.getOffsetLeft=function(t){var e=0;return e=t.offsetLeft,t.offsetParent&&t.offsetParent!=t&&"BODY"!=t.offsetParent.nodeName&&(e+=BD.IMG.utils.getOffsetLeft(t.offsetParent)),e},BD.IMG.utils.getParentNode=function(t,e){var i=t;for(e=e.toLowerCase();i&&i.nodeName.toLowerCase()!=e&&"BODY"!=i.nodeName;)i=i.parentNode;return i&&"BODY"!=i.nodeName||(i=null),i},BD.IMG.utils.scrollTo=function(){function t(t,i,n){var r=i-t>0?1:-1,o=75,u=t,a=null,f=function(){Math.abs(u-i)<=o?(n(i),clearTimeout(a)):(u+=r*o,n(u),a=setTimeout(f,e))};a=setTimeout(f,e)}var e=16;return t}();var f={w:"a",k:"b",v:"c",1:"d",j:"e",u:"f",2:"g",i:"h",t:"i",3:"j",h:"k",s:"l",4:"m",g:"n",5:"o",r:"p",q:"q",6:"r",f:"s",p:"t",7:"u",e:"v",o:"w",8:"1",d:"2",n:"3",9:"4",c:"5",m:"6",0:"7",b:"8",l:"9",a:"0",_z2C$q:":","_z&e3B":".",AzdH3F:"/"};BD.IMG.utils.compile=function(t){for(var e=(t.charCodeAt(0)+t.length).toString(16),i=1;i<t.length;i++)e+="g"+(t.charCodeAt(i)+t.charCodeAt(i-1)).toString(16);return e};var s=/([a-w\d])/g,h=/(_z2C\$q|_z&e3B|AzdH3F)/g;BD.IMG.utils.uncompile=function(t){if(!t||0===t.indexOf("http"))return t;var e=t.replace(h,function(t,e){return f[e]});return e.replace(s,function(t,e){return f[e]})};var c=["a","c","e","g","i","k","z","b","w","o"];BD.IMG.utils.encodeTime=function(t){for(var e=t+"",i="",n=0,r=e.length;r>n;n++)i+=c[parseInt(e.charAt(n),10)];return i},BD.IMG.utils.zoomImageLimitMin=function(t,e,i,n){var r,o,u,a;return t/e>=i/n?(o=n,r=o*t/e):(r=i,o=r*e/t),u=(i-r)/2,a=(n-o)/2,{width:parseInt(r),height:parseInt(o),left:parseInt(u),top:parseInt(a)}},r.encodeHTMLEntity=function(t){return t=t||"",t.replace(/</g,"&lt;").replace(/>/g,"&gt;")},r.parseDate=function(t){var e=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof t){if(e.test(t)||isNaN(Date.parse(t))){var i=t.split(/ |T/),n=i.length>1?i[1].split(/[^\d]/):[0,0,0],r=i[0].split(/[^\d]/);return new Date(r[0]-0,r[1]-1,r[2]-0,n[0]-0,n[1]-0,n[2]-0)}return new Date(t)}return new Date},BD.IMG.utils.JSONStringify=function(){var t=function(){function e(t){return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/["\\\x00-\x1f]/g,function(t){var e=o[t];return e?e:(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})),'"'+t+'"'}function i(e){var i,n,r,o=["["],u=e.length;for(n=0;u>n;n++)switch(r=e[n],typeof r){case"undefined":case"function":case"unknown":break;default:i&&o.push(","),o.push(t(r)),i=1}return o.push("]"),o.join("")}function n(t){return 10>t?"0"+t:t}function r(t){return'"'+t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+'"'}var o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(n){switch(typeof n){case"undefined":return"undefined";case"number":return isFinite(n)?String(n):"null";case"string":return e(n);case"boolean":return String(n);default:if(null===n)return"null";if(n instanceof Array)return i(n);if(n instanceof Date)return r(n);var o,u,a=["{"],f=t;for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s))switch(u=n[s],typeof u){case"undefined":case"unknown":case"function":break;default:o&&a.push(","),o=1,a.push(f(s)+":"+f(u))}return a.push("}"),a.join("")}}}();return t}()});
;define("searchresult:widget/ui/base/ParamsBus/ParamsBus.js",function(e,n,t){var r=e("common:widget/ui/jquery/jquery.js"),o=e("common:widget/ui/EventEmitter/EventEmitter.js"),i=e("searchresult:widget/ui/base/utils/utils.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.ParamsBus=t.exports=function(){function e(e){var n={};for(var t in e)n[t]=i.trim(e[t]);return n}function n(e){return d[e]}function t(e,n){d[e]=n}function a(){var e=i.trim(window.location.hash.replace(/^#/,"")),n=""==e?[]:i.query2Json(e);return n}function s(e){var n=a();return n[e]}function u(e,n){var t=a();t[e]=n,window.location.hash="#"+i.json2Query(t),o.eventCenter.trigger("hash.reset",[window.location.hash])}function f(e,n){var t=a();for(var r in e)t[r]=e[r];if(n)for(var s=0,u=n.length;u>s;s++)delete t[n[s]];window.location.hash="#"+i.json2Query(t),o.eventCenter.trigger("hash.reset",{hash:window.location.hash})}function c(e){return w[e]}function h(){var e=r.extend(!0,{},w),n=a();for(var t in n)e[t]=n[t];return e}function v(e){return void 0==s(e)?void 0==c(e)?n(e):c(e):s(e)}function g(e){var n=r.extend(!0,{},w);for(var t in e)n[t]=e[t];return n}function l(){var e=r.extend(!0,{},w),n=a();for(var t in d)e[t]=d[t];for(var t in n)e[t]=n[t];return e}var w=e(i.query2Json(i.escapeXSS(window.location.search.substring(1)))),d=e(BD.IMG.tplConf);d.ie&&"gb2312"!==d.ie.toLowerCase()&&"gb18030"!==d.ie.toLowerCase()||(d.ie="gbk"),w.st&&isNaN(parseInt(w.st))&&(w.st="-1");var m=function(){return C},C=null,I=function(e){C=e};return{getTplConfItem:n,setTplConfItem:t,getHashConfItem:s,getSearchConfs:h,getSearchConfItem:c,getGlobalConfs:l,getGlobalConfItem:v,resetHashConf:f,getNewURL:g,getHashConf:a,getSubWord:m,setSubWord:I,setHashConfItem:u}}()});
;define("searchresult:widget/ui/base/statistic/statistic.js",function(t,e,n){BD=window.BD||{},BD.IMG=BD.IMG||{};var o=t("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),r=t("common:widget/ui/jquery/jquery.js"),s=t("common:widget/ui/EventEmitter/EventEmitter.js"),i=t("common:widget/ui/monitorRequest/monitorRequest.js"),a=t("searchresult:widget/ui/base/utils/utils.js"),f=n.exports=function(){function t(t,e,s){var i=ie+"1.gif",f={};"undefined"==typeof e.sr&&(e.sr=""),f.p=e.p,"2"==s.button&&(f.p=496),f.sr=e.sr,f.fmq=void 0==o.getGlobalConfItem("fmq")?a.fmqValueSet():o.getGlobalConfItem("fmq"),f.q=o.getGlobalConfItem("word"),f.hostfr="imgstat",f.cl=o.getGlobalConfItem("cl")||"",f.pv=o.getGlobalConfItem("pv")||"",f.x=screen.width+"x"+screen.height,f.s=o.getGlobalConfItem("s")||"",1===e.asp&&(f.asp=1),f.tabindex=ge;var u=a.uncompile(e.u),p=a.uncompile(e.f);if(f.u=u,f.t=e.t,f.f=p,f.ist=e.ist,f.rts=e.rts,1==f.p&&t.href){var m=r.cookie("BAIDUID"),l=Math.round((new Date).getTime()/1e3);l=a.encodeTime(l),m=m?m.substring(0,6):"",t.href="/i?tn=redirect&ipn=rdt&word=j&juid="+encodeURIComponent(m)+"&sign="+encodeURIComponent(l)+"&url="+encodeURIComponent(p)}if(-1==f.fmq.indexOf("_D_R")&&-1==f.fmq.indexOf("_R_D")&&ue&&0==e.p&&(f.ict=(new Date).getTime()-ue,ue=0),10==e.sr){var g={w:"",h:"",s:"",u:"",f:"",t:"",id:"",cs:"",pn:e.pn,lm:o.getGlobalConfItem("lm")||"",z:o.getGlobalConfItem("z")||""};for(var q in g)f[q]=g[q]}else try{n(t,f)}catch(s){}return f.cs=e.cs||0,o.getTplConfItem("isseed")&&(f.isseed=1),{host:i,query:f,isAsyn:!1}}function e(){}function n(t,e){var n=t.name,o="f"+n,r=document.getElementById(o);u(r,e);for(var s=document.getElementsByName(n),i=0,a=s.length;a>i;i++){var f=s[i],l=f.nodeName.toLowerCase(),g=f.href;"a"==l&&/word=/.test(g)?p(f,e):"a"==l&&/jn=/.test(g)&&m(f,e)}}function u(t,e){if(null!=t){var n,o,r,s,i,a,f,u,p=t.innerHTML.replace(/(^\s*)|(\s*$)/g,""),m=p.split(" ");if(3==m.length){var l=m[0].split("x");n=l[0],o=l[1],r=m[1].substring(0,m[1].length-1),s=m[2]}else 4==m.length&&(i=m[0],a=m[1],f=m[2],u=m[3]);e.w=n||i||"",e.h=o||a||"",e.s=r||f||"",e.lm=s||u||""}}function p(t,e){for(var n=t.childNodes,o=null,r=0,s=n.length;s>r;r++){var i=n[r];if("img"==i.nodeName.toLowerCase()){o=i;break}}var f=t.href,u=o.src,p=f.substring(f.indexOf("?")+1,f.length),m="";m=-1==u.indexOf("?")?u.substring(u.lastIndexOf("/")+1,u.length):u.substring(u.indexOf("?")+1,u.length);var l=a.query2Json(p),g=a.query2Json(m);e.q=l.word||"",e.qs=a.fmqValueSet(),e.id=l.di||"",e.pn=l.pn||"",e.z=l.z||"",e.cs=g.u||""}function m(t,e){var n=t.href,o=n.substring(n.indexOf("?")+1,n.length),r=BD.IMG.query2Json(o);e.u=r.u||"",e.f=r.f||"",e.t=r.t||""}function l(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),29==s?(r.vtime=e.vtime,r.pn=e.pn,r.cs=e.cs||"",r.u=encodeURIComponent(e.u),r.f=encodeURIComponent(e.f||""),{host:n,query:r,isAsyn:!1}):2==s?{host:n,query:r,isAsyn:!1}:{host:n,query:r,isAsyn:!0}}function g(t,e){var n=ie+"1.gif",r={},s=e.p;return r.p=s,r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.zt=e.zt,{host:n,query:r,isAsyn:!1}}function q(t,e){var n=o.getSearchConfs();"undefined"!=typeof pe.pageTurnIndex&&(n.n=pe.pageTurnIndex);var s=r.cookie("fb");return n.fb=s?1:0,n.pn=void 0===e.pn?"":e.pn,n.t=1,n.qs=a.fmqValueSet(),n.hostfr="imgstat",n.tn="baiduimage",n.imgN=e.imgN,{host:ae,query:n,isAsyn:!1}}function y(t,e){var n=ie+"2.gif",r={},s=e.p;return r.p=s,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.r=e.r||"",r.rq=e.rq||"",r.tp=e.tp||"",r.ps=e.ps||"",r.pagepos=e.pagepos||"",{host:n,query:r,isAsyn:!1}}function d(t,e){var n=ie+"2.gif",r={},s=e.p;return r.p=s,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.r=e.r||"",r.rq=e.rq||"",r.tp=e.tp||"",r.ps=e.ps||"",r.etc="tops",{host:n,query:r,isAsyn:!1}}function c(t,e){var n=ie+"2.gif",r={},s=e.p;return r.p=s,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.r=e.r||"",r.rq=e.rq||"",r.tp=e.tp||"",r.ps=e.ps||"",{host:n,query:r,isAsyn:!1}}function h(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.ic=e.ic||"0",{host:n,query:r,isAsyn:!1}}function w(t,e){var n=ie+"4.gif",s=o.getSearchConfs(),i={};r.extend(i,s),delete i.word;var f=e.p,u=r(window).scrollTop();return i.filterpos=u>50?"pull":"top",i.p=f,i.currf=e.currf,i.onnum=e.onnum,i.pt="pull",i.q=o.getGlobalConfItem("word"),i.hostfr="imgstat",i.qs=a.fmqValueSet(),i.fb="undefined"==typeof e.fb||null==e.fb?"":e.fb,{host:n,query:i,isAsyn:!1}}function b(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.bdto=e.bdto||"",{host:n,query:r,isAsyn:!1}}function v(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.out=e.out,r.pn=e.pn||o.getGlobalConfItem("pn"),r.times=e.times||-1,{host:n,query:r,isAsyn:!1}}function I(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.qs=a.fmqValueSet(),r.err=e.err,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",{host:n,query:r,isAsyn:!1}}function C(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.wpaperTab=e.wpaperTab,r.q=o.getGlobalConfItem("word"),{host:n,query:r,isAsyn:!1}}function A(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.wpsizeType=e.wpsizeType,r.q=o.getGlobalConfItem("word"),{host:n,query:r,isAsyn:!1}}function G(t,e){var n=ie+"1.gif",r={},s=e.p;return r.p=s,r.qs=a.fmqValueSet(),r.url=e.url,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",{host:n,query:r,isAsyn:!1}}function T(t,e){var n=ie+"1.gif",r={},s=e.p;return isNaN(parseInt(e.showTime))&&(e.showTime=-2),r.p=s,r.index=e.index,r.po=e.po,r.showTime=e.showTime,r.type=e.type,r.action=e.action,r.qs=a.fmqValueSet(),r.url=encodeURIComponent(e.url),r.imgN=e.imgN||-1,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",{host:n,query:r,isAsyn:!1}}function S(t,e){var n=ie+"1.gif",r={},s=e.p;return isNaN(parseInt(e.showTime))&&(e.showTime=-2),r.p=s,r.index=e.index,r.pn=e.pn,r.po=e.po,r.showTime=e.showTime,r.type=e.type,r.action=e.action,r.qs=a.fmqValueSet(),r.url=encodeURIComponent(e.url),r.imgN=e.imgN||-1,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",{host:n,query:r,isAsyn:!1}}function D(t,e){var n,r=ie+"1.gif",s={},i=e.p;return n=isNaN(parseInt(e.showTime))?-2:e.showTime,s.p=i,s.qs=a.fmqValueSet(),s.url=encodeURIComponent(e.url),s.pos=e.pos,s.action=e.action,s.type=e.type,s.showTime=n,s.q=o.getGlobalConfItem("word"),s.hostfr="imgstat",{host:r,query:s,isAsyn:!1}}function V(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.qs=a.fmqValueSet(),r.saved=e.saved,r.pn=e.pn,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.cs=e.cs,r.u=e.u,r.f=e.f,{host:n,query:r,isAsyn:!1}}function x(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.qs=a.fmqValueSet(),r.saved=e.saved,r.pn=e.pn,r.q=o.getGlobalConfItem("word"),r.hostfr="imgstat",r.cs=e.cs,r.u=e.u,r.f=e.f,{host:n,query:r,isAsyn:!1}}function N(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.etc=void 0!==e.etc?e.etc:"",r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function B(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.type=e.type,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function R(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.type=e.type,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.tprn=e.tprn,r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function U(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.type=e.type,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function j(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.type=e.type,r.g=e.g,r.l=e.l,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function z(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.type=e.type,r.g=e.g,r.l=e.l,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function E(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.type=e.type,r.g=e.g,r.l=e.l,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function M(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.type=e.type,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function O(t,e){var n=ie+"4.gif",r={},s=e.p;return r.p=s,r.hostfr="imgstat",r.qs=a.fmqValueSet(),r.q=o.getGlobalConfItem("word"),r.to=e.to,e.isAsyn&&t?{host:n,query:r,isAsyn:!0}:{host:n,query:r,isAsyn:!1}}function k(t,e){var n=ie+"4.gif",s={},i=e.p;return r.extend(s,e),s.p=i,s.qs=a.fmqValueSet(),s.q=o.getGlobalConfItem("word"),s.hostfr="imgstat",{host:n,query:s,isAsyn:!1}}function P(t,e){var n=ie+"5.gif",o={};return o.p="12",o.qs=a.fmqValueSet(),o.tp="2",o.click="hotq",o.keyb="",o.word=le,o.hotq=e.hotq,o.hostfr="imgstat",{host:n,query:o,isAsyn:!0}}function $(t,e){var n=ie+"4.gif",o={};return o.reachbottom=e.reachbottom,{host:n,query:o,isAsyn:!1}}function _(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.type=e.type,r.action=e.action,r.qc=e.qc||"",r.po=e.po,r.q=o.getGlobalConfItem("word"),{host:n,query:r,isAsyn:!1}}function F(t,e){var n=ie+"4.gif",s={};return r.extend(s,e),s.p=e.p,s.q=o.getGlobalConfItem("word"),s.fr=e.fr||"",o.getTplConfItem("isseed")&&(s.isseed=1),{host:n,query:s,isAsyn:!1}}function L(t,e){var n=ie+"3.gif",s={};return r.extend(s,e),s.cs=e.cs,s.pn=e.pn,s.q=o.getGlobalConfItem("word"),{host:n,query:s,isAsyn:!1}}function J(t,e){var n=ie+"4.gif",s={};return r.extend(s,e),s.p=e.p,s.q=o.getGlobalConfItem("word"),{host:n,query:s,isAsyn:e.isAsyn===!0}}function W(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.q=o.getGlobalConfItem("word"),r.rtt=e.rtt||"",r.bw1=e.bw1||"",r.bw2=e.bw2||"",{host:n,query:r,isAsyn:!1}}function H(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.q=o.getGlobalConfItem("word"),r.rtt=e.rtt||"",r.bw1=e.bw1||"",r.bw2=e.bw2||"",{host:n,query:r,isAsyn:!1}}function K(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.q=o.getGlobalConfItem("word"),r.rtt=e.rtt||"",r.bw1=e.bw1||"",r.bw2=e.bw2||"",{host:n,query:r,isAsyn:!1}}function Q(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.pn=e.pn,r.u=e.u,r.q=o.getGlobalConfItem("word"),{host:n,query:r,isAsyn:!1}}function X(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.q=o.getGlobalConfItem("word"),{host:n,query:r,isAsyn:!1}}function Y(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.type=e.type||"",r.action=e.action||"",r.pos=e.pos||"",r.q=o.getGlobalConfItem("word"),{host:n,query:r,isAsyn:!1}}function Z(t,e){var n=ie+"4.gif",r={};return r.p=e.p,r.q=o.getGlobalConfItem("word"),r.imgN=e.imgN||"",r.retN=e.retN||"",r.state=e.state||"",r.tm=e.tm||"",{host:n,query:r,isAsyn:!1}}function te(t,e){var n=ie+"5.gif",s={};return r.extend(s,e),s.p=e.p,s.q=o.getGlobalConfItem("word"),{host:n,query:s,isAsyn:e.isAsyn===!0}}function ee(t,e){var n=ie+"4.gif",s={};return r.extend(s,e),s.p=e.p,s.q=o.getGlobalConfItem("word"),{host:n,query:s,isAsyn:!1}}function ne(t,e){var n=ie+"16.gif",o={};return r.extend(o,e),o.p=e.p,{host:n,query:o,isAsyn:!1}}function oe(t,e){var n=ie+"4.gif",o={};return o.oriquery=e.oriquery,o.rstr=e.rstr,{host:n,query:o,isAsyn:!1}}function re(t,e){var n=ie+"4.gif",o={};return o.s=e.s,o.p=e.p,{host:n,query:o,isAsyn:!1}}function se(t,e,n){if(null!=t)for(var s=t||window.event,f=s.srcElement||s.target;f.parentNode!=document.body&&f.tagName&&"a"!=f.tagName.toLowerCase();)f=f.parentNode;else var f=document.body;"undefined"==typeof n&&(n={});var u=he[e];if("undefined"!=typeof u){n.p=e;var p=u.apply(this,[f,n,s]),m=p.host,l=p.query;if(l.tn="baiduimage",window.imgTempData&&imgTempData.fcData&&(l.fcType=imgTempData.fcType,l.pn&&(l.pn=l.pn-0,l.pn>=imgTempData.fcData.length&&(l.pn-=imgTempData.fcData.length))),BD.IMG.tplConf&&BD.IMG.tplConf.aspSID&&(l.aspSID=BD.IMG.tplConf.aspSID),l.q&&(l.q=le,l.ie=me,0==e||29==e)){var g=o.getGlobalConfItem("stepWord");g&&a.decodeURIComponent(g).indexOf("$$")>=0?(g=encodeURIComponent(a.decodeURIComponent(g).replace(/\$\$/g," ")),l.q=g,l.ie="utf-8"):(l.q=le,l.ie=me)}l.word&&(l.word=le),pe.queryFlag&&pe.queryFlag.length>0&&(l.qf=pe.queryFlag),qe&&(l.qcf=qe),window.recommendData&&recommendData.length>0&&(l.rd=recommendData.length),window.recommendCategory&&(l.rc=recommendCategory),pe.BrowserHotRs&&(l.bhr="true"),l.qpagetype=ye,l.userid=pe.encodeUserNumId,"object"==typeof l&&(l=a.json2Query(l));var q=p.isAsyn,y=i(m+"?"+l);return q&&(s.returnValue=!1,s.preventDefault&&s.preventDefault(),setTimeout(function(){var t=f&&r(f).attr("target"),e=!t||"_self"==t;e?location.href=n.href||f.href:window.open(n.href||f.href)},fe)),y}}var ie="http://imgstat.baidu.com/",ae="http://image.baidu.com/pv/pv.gif",fe=100,ue=(new Date).getTime(),pe=BD.IMG.tplConf||{},me=o.getTplConfItem("ie"),le=o.getTplConfItem("queryWordEnc"),ge=(o.getTplConfItem("queryWordGBKEnc"),-9),qe=o.getTplConfItem("queryClassFlag")||"",ye=o.getTplConfItem("queryPageType")||"0",de=pe.encodeUserNumId||"",ce=new Date;de?(ce.setTime(ce.getTime()+6048e6),r.cookie("userid",de,{expires:ce})):r.removeCookie("userid"),s.eventCenter.on("strategy",function(t){if("showImg"==t.strategyType&&"resize"!=t.state.type){var e=t.data||[];f(null,6,{pn:t.state.currPageStartPn,imgN:e.length})}}),s.eventCenter.on("Bizhi.tab-change",function(t){t&&(ge=t.index)});var he={0:t,1:t,2:l,3:l,4:l,5:l,6:q,10:y,14:c,16:h,24:g,25:w,27:N,28:b,29:l,30:l,31:l,38:v,39:I,44:C,45:A,46:G,47:G,48:G,50:N,51:N,52:O,53:k,54:P,55:N,56:F,57:L,60:j,61:z,62:E,63:M,64:N,65:N,66:B,69:R,70:U,99:V,100:_,200:T,201:D,202:J,210:S,211:$,300:N,301:N,302:N,303:W,304:Z,381:H,382:K,492:Q,493:X,494:Y,495:x,496:e,497:d,498:te,499:ee,500:ee,501:ne,502:oe,503:re,1101001:ee,1101002:ee,1101101:ee};return se}()});
;define("searchresult:widget/ui/base/Timeline/Timeline.js",function(n,i,e){BD=window.BD||{},BD.IMG=BD.IMG||{},e.exports=BD.IMG.TimeLine=function(n){var i,e,t=20,r=100,o=!0,u=0,a=0,d=function(n){return n},c=function(){},f=function(){};n.rander&&(c=n.rander),n.transition&&(d=n.transition),n.end&&(f=n.end),t=n.interval||t,r=n.duration||r;var s=function(n){n=n||{},t=n.interval||t,r=n.duration||r},v=function(){i=(new Date).getTime(),e=i+(o?r:0),u=0,D()},D=function(){var n=(new Date).getTime();return u=(n-i)/r,n>=e?(c(d(u=1)),void f()):(c(d(u)),void(a=setTimeout(D,t)))};return{init:s,launch:v}}});
;define("searchresult:widget/ui/base/statisticPic/statisticPic.js",function(t,e,r){{var i=t("common:widget/ui/monitorRequest/monitorRequest.js"),n=t("searchresult:widget/ui/base/utils/utils.js"),m=t("common:widget/ui/jquery/jquery.js"),s=t("common:widget/ui/EventEmitter/EventEmitter.js"),u=t("searchresult:widget/ui/base/ParamsBus/ParamsBus.js");r.exports=function(){function t(){s.eventCenter.on("view.imgRenderStart",a),s.eventCenter.on("view.dispOnload",r),s.eventCenter.on("view.dispErr",e)}function e(t){var e=t.self;d++,1==d&&(l=e.src)}function r(t){var e=t.dispType,r=(o(),t.spaceImgNum),s=t.from,u=t.to,a=t;if(t={},t.tp=4,t.qs=n.fmqValueSet(),t.page=a.page,t.dt=a.dispType,t.loadtm=a.tm,t.loadtm2=a.tm2,t.loadtm64=a.tm64||0,t.state64=a.state64||"",t.viewW=m(window).width(),t.viewH=m(window).height(),t.screenW=window.screen.width||0,t.screenH=window.screen.height||0,t.spaceN=r,t.simgN=a.smallImg,t.stimgN=a.smallThumbImg,t.imgN=u-s+1||0,t.asyn="ini"==e?"0":"1",t.hoverNum=a.hoverNum,t.largeNum=a.largeNum,t.otherNum=a.otherNum,t.t1Num=a.t1Num,t.t2Num=a.t2Num,t.t3Num=a.t3Num,t.t1Err=a.t1Err,t.t2Err=a.t2Err,t.t3Err=a.t3Err,t.tnErr=a.tnErr,t.t1Time=a.t1Time,t.t2Time=a.t2Time,t.t3Time=a.t3Time,t.hostfr="imgstat",t.userid=v.encodeUserNumId,t.pn=s,t.q=N,i("http://imgstat.baidu.com/4.gif?"+n.json2Query(t)),d>0){var c={};c.tp=5,c.qs=n.fmqValueSet(),c.count=d,c.f=encodeURIComponent(l),c.hostfr="imgstat",c.userid=v.encodeUserNumId,i("http://imgstat.baidu.com/4.gif?"+n.json2Query(c))}}function o(){w=new Date;var t=w-g;return t}function a(t){var e=t.dispType;d=0,l="",w=null,g="ini"==e?f:new Date}function c(t){p=f=t||new Date}var d=0,l="",g=null,w=null,f=null,p=null,v=BD.IMG.tplConf,N=u.getTplConfItem("queryWordGBKEnc");return{recordErr:e,recSTm:a,recETm:o,recITm:c,getPageStartTime:function(){return p},ini:t}}()}});
;define("searchresult:widget/ui/base/History/History.js",function(e,n,t){BD=window.BD||{},BD.IMG=BD.IMG||{};var a=e("common:widget/ui/EventEmitter/EventEmitter.js"),o=e("common:widget/ui/jquery/jquery.js"),s=e("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),i=e("searchresult:widget/ui/base/utils/utils.js");BD.IMG.hashHistory=t.exports=function(){var e,n,t=0,r=i.escapeXSS(window.location.hash.replace(/^#/,"")||""),c=[r],h=(i.query2Json(i.escapeXSS(window.location.search.substring(1))),function(e){e=e||"#";var t=n.contentWindow.document;t.open(),t.write('<script>if(window.top.location.hash.replace(/^#/,"")!="'+e.replace(/^#/,"")+'")window.top.location.hash="'+e+'";</script>'),t.write("<script>window.top.BD.IMG.hashHistory.hashChangeCallBack()</script>"),t.close()}),u=function(){var e=i.escapeXSS(window.location.hash.replace(/^#/,""));""==e&&(e=i.json2Query(s.getHashConf())),r=r.replace(/^#/,""),e!=r&&(d(e,r)?a.eventCenter.trigger("view.pageTurn",["pageTurn"]):a.eventCenter.trigger("hash.fliterchange"),r=e,c[c.length-1]!==e&&c.push(e))},d=function(e,n){return!1},l=function(){""==r.replace(/^#/,"")&&(r=i.json2Query(s.getHashConf())),e="onhashchange"in document.body,e||(document.body.setAttribute("onhashchange","return false"),e="function"==typeof document.body.onhashchange),e&&!o.browser.ie?window.onhashchange=u:(n=document.createElement("iframe"),n.style.display="none",document.body.appendChild(n),h(i.escapeXSS(window.location.hash)),t||(t=!0,a.eventCenter.on("hash.reset",function(e){var n=e.hash;h(n)})))};return{hashChangeCallBack:u,ini:l}}()});
;define("searchresult:widget/ui/base/StaticGlobalConf/StaticGlobalConf.js",function(e,i,t){{var n=e("common:widget/ui/jquery/jquery.js");t.exports=function(){function e(e){var i=0;e=e.replace(":FG=1",""),e+=":FG=1";for(var t=0;t<e.length;t++)i=31*i+e.charCodeAt(t),i%=4294967296;var n=i%101;return n}var i=e(n.cookie("BAIDUID")),t={};return t=i>=80?{margin:5,padding:0,pageNumHeight:33,lineHeight:300,maxBaseLineHeight:300,minBaseLineHeight:250,pageLineNum:3,imgDigestHeight:0,maxImgWidth:400,pageMoreNum:10}:{margin:5,padding:0,pageNumHeight:33,lineHeight:250,maxBaseLineHeight:220,minBaseLineHeight:200,pageLineNum:3,imgDigestHeight:0,maxImgWidth:400,pageMoreNum:10},{get:function(e){return t[e]},getAll:function(){return t}}}()}});
;define("searchresult:widget/ui/base/utils/imghelper.js",function(t){var h=t("common:widget/ui/jquery/jquery.js"),i={_loaded:{},_loading:{},fetch:function(t){var i=new h.Deferred;if(this._loaded[t])return i.resolve(this._loaded[t]);if(this._loading[t])return this._loading[t];var e=new Image,n=this;return e.onload=function(){var h={width:e.width,height:e.height};n._loaded[t]=h,i.resolve(h)},e.onerror=function(){i.reject()},this._loading[t]=i,e.src=t,i.always(function(){e.onload=e.onerror=null,delete n._loading[t],e=null})}},e={zoom:function(t,h){if(!(t.width&&t.height&&h.width&&h.height))return{width:t.width&&h.width?Math.min(h.width,t.width):"auto",height:t.height&&h.height?Math.min(h.height,t.height):"auto"};var i={};return t.width/t.height>h.width/h.height?(i.width=Math.min(t.width,h.width),i.height=Math.floor(t.height*i.width/t.width)):(i.height=Math.min(t.height,h.height),i.width=Math.floor(t.width*i.height/t.height)),i},scaleFull:function(t,h){if(!(t.width&&t.height&&h.width&&h.height))return{width:t.width&&h.width?Math.min(h.width,t.width):"auto",height:t.height&&h.height?Math.min(h.height,t.height):"auto"};var i={};return t.width/t.height>h.width/h.height?(i.height=h.height,i.width=Math.floor(t.width*i.height/t.height)):(i.width=h.width,i.height=Math.floor(t.height*i.width/t.width)),i.width>h.width&&(i["margin-left"]=(h.width-i.width)/2+"px"),i.height>h.height&&(i["margin-top"]=(h.height-i.height)/3+"px"),i},getFileType:function(t){if(!t)return"";var h=t.lastIndexOf(".");return h>0?t.substr(h+1):""},formatBytes:function(t,h,i){var e=["b","kb","mb","gb"],n=t;for(h=h||0;n>=1024&&h<e.length-1;)n/=1024,h+=1;return h>0&&(n=Math.round(100*n)/100),i&&(n=i.call(null,n)),n+e[h]},bindScaleFull:function(t,h,i){var n=t[0];n.onload=function(){var n=e._imgLoaded(t,h);i&&i(n)}},_imgLoaded:function(t,h){var i=t[0],n=e.scaleFull({width:i.width,height:i.height},h);return t.css(n),i.onload=null,n},loadImage:function(t,e){h(t).each(function(t,h){i.fetch(h).then(e||function(){})})}};return e});
;define("searchresult:widget/ui/base/Fx/Fx.js",function(i,t,s){var n=i("common:widget/ui/jquery/jquery.js"),o=function(){},e={loops:60,delay:30,onstart:o,onfinish:o},h=s.exports=function(i){this.reset(i)};h.prototype={constructor:h,start:function(){return this._running||this._finished?this:(this._config.onstart&&this._config.onstart(),this._running=!0,this._paused=!1,this._do())},_do:function(){for(var i,t,s=this._config.props,n=0,o=s.length,e=!0;o>n;n++)i=s[n],t=i.get()+i.step,(i.to>i.from&&t<i.to||i.to<i.from&&t>i.to)&&(i.set(t),e=!1),e&&i.set(i.to);if(e)this._finished=!0,this._running=!1,this._paused=!1,this._config.onfinish&&this._config.onfinish();else{var h=this;this._timer=setTimeout(function(){h._do()},this._delay)}},pause:function(){clearTimeout(this._timer),this._paused=!0,this._running=!1},kill:function(){},reset:function(i){clearTimeout(this._timer),this._paused=!1,this._finished=!1,this._running=!1,this._config=n.extend(!0,{},e,i),this._delay=this._config.delay;for(var t,s=this._loops=this._config.loops,o=this._config.props,h=0,r=o.length;r>h;h++)t=o[h],t.step=(t.to-t.from)/s},end:function(){if(clearTimeout(this._timer),!this._finished){for(var i,t=this._config.props,s=0,n=t.length;n>s;s++)i=t[s],i.set(i.to);this._running=!1,this._finished=!0,this._config.onfinish&&this._config.onfinish()}}}});
;define("searchresult:widget/ui/base/DragSupport/DragSupport.js",function(e,t,n){var o=(e("common:widget/ui/jquery/jquery.js"),e("common:widget/ui/EventEmitter/EventEmitter.js")),r=function(){this.container=null,this.dragDOM=null,this.SENSE=10,this.MOVE_CURSOR="url(http://img0.bdstatic.com/img/image/imgsearch/texing/img/grabhand.cur), move",this.enableDrag=!0,this.triggerEvent=!0};r.prototype={constructor:r,init:function(e,t){this.container=e,this.dragDOM=t,this.dragIt()},dragIt:function(){function e(e){if(!c)return!0;c.style.cursor=l.MOVE_CURSOR,e=e||window.event;var t=e.clientX-u,n=e.clientY-i;return c.style.left=t+"px",c.style.top=n+"px",g||(g=Math.abs(e.clientX-r)>l.SENSE||Math.abs(e.clientY-a)>l.SENSE),e.preventDefault?e.preventDefault():e.returnValue=!1,l.triggerEvent&&(l.triggerEvent=!1,o.eventCenter.trigger("JDrag",{})),!1}function t(){document.removeEventListener?(document.removeEventListener("mousemove",e,!0),c.onmouseup=null):c.detachEvent&&(c.releaseCapture(),c.detachEvent("onmousemove",e),c.detachEvent("onmouseup",n)),l.enableDrag||(c.style.cursor=""),g=!1,c.onmouseup=l.enableDrag?m:null}function n(e){e=e||window.event;e.srcElement||e.target;l.enableDrag&&(e.stopPropagation?(e.stopPropagation(),e.preventDefault()):(e.cancelBubble=!0,e.returnValue=!1)),t()}if(!this.container)return!1;var r,a,u,i,s=this.container,l=this,c=this.dragDOM,g=!1,m=function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancleBubble=!0};s.onmousedown=function(t){c=l.dragDOM,t=t||window.event;var o=t.srcElement||t.target;return o===c&&l.enableDrag?(c._unclick=!0,r=t.clientX,a=t.clientY,u=r-(parseInt(c.style.left)||0),i=a-(parseInt(c.style.top)||0),void(document.addEventListener?(document.addEventListener("mousemove",e,!0),c.onmouseup=n,t.stopPropagation(),t.preventDefault()):(c.setCapture(),c.attachEvent("onmousemove",e),c.attachEvent("onmouseup",n),t.cancelBubble=!0,t.returnValue=!1))):!0},s.onmouseout=function(e){e=e||window.event;var n=e.toElement||e.relatedTarget;n!==c&&n!==s&&g&&(t(),document.onmousedown=function(){s.onmouseup=null,document.onmousedown=null},s.onmouseup=function(e){e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,s.onmouseup=null})},this.dragDOM.style.cursor=this.MOVE_CURSOR},enable:function(){this.enableDrag=!0,this.dragDOM.style.cursor=this.MOVE_CURSOR},disable:function(){this.enableDrag=!1,this.dragDOM.style.cursor="default"}},n.exports=r});
;define("searchresult:widget/ui/base/ZoomProvider/ZoomProvider.js",function(t,e,o){var i=t("common:widget/ui/jquery/jquery.js"),n=t("common:widget/ui/EventEmitter/EventEmitter.js"),s=function(t){this.defaultOptions={minRate:.1,maxRate:10,zoomRate:.1,clickZoomRate:.25,dbClickZoomRate:.25,btnZoom:!0,wheelZoom:!1,dbClickZoom:!1},this.bigButton=null,this.smallButton=null,this.con=null,this.options=i.extend(!0,{},this.defaultOptions,t||{}),this.ZOOM_RATE=this.options.zoomRate,this.CLICK_ZOOM_RATE=this.options.clickZoomRate,this.minRate=this.options.minRate,this.maxRate=this.options.maxRate,this._listeners={},this.enableBig=!0,this.enableSmall=!0};s.prototype={constructor:s,init:function(t,e,o){function n(t){a.wheel(t)}var s=(this.bigButton=t,this.smallButton=e,this.con=o),a=this;this.options.wheelZoom&&(s.addEventListener&&s.addEventListener("DOMMouseScroll",n,!0),s.onmousewheel=n),this.options.btnZoom&&this.buttonZoomIt(),this.options.dbClickZoom&&i(this.con).dblclick(function(t){a.dbClickZoomIt(t)})},doZoom:function(t,e,o,i,n){if(!("IMG"!==t.tagName||t.zoomRate-this.minRate<=1e-5&&!n||t.roomRate>=this.maxRate&&n||1!=t.__loaded)){var s,a,l=(this.smallButton,this.bigButton,parseInt(t.style.left)),r=parseInt(t.style.top),h=100,m=parseFloat(t.style.width)||t.offsetWidth,g=(parseFloat(t.style.height)||t.offsetHeight,t.srcWidth),c=t.srcHeight,d=t.parentNode.offsetWidth,u=t.parentNode.offsetHeight;e>=this.maxRate?e=this.maxRate:e-this.minRate<1e-6&&(e=this.minRate),s=e*g,a=e*c;var f=s/m*(l-o)+o,v=s/m*(r-i)+i;h>f+s?f=h-s:f>d-h&&(f=d-h),h>v+a?v=h-a:v>u-h&&(v=u-h),t.__zoomed=!0,t.__zoomForLog=!0,t.zoomRate=e,this.currentZoomRate=e,this.trigger("zoom",{imgRenderWidth:s,imgRenderHeight:a,imgRenderLeft:f,imgRenderTop:v,imgRenderRate:e})}},buttonZoomIt:function(){function t(t,e){var o,n=s.children[0],a=parseInt(n.style.left)||0,l=parseInt(n.style.top)||0,r=parseInt(n.style.width)||n.offsetWidth,h=parseInt(n.style.height)||n.offsetHeight,m=s.offsetWidth/2,g=s.offsetHeight/2,c=r/2,d=h/2;e||(t*=-1),o=(r+n.srcWidth*t)/n.srcWidth,m>a&&a+r>m&&g>l&&l+h>g||(m=a+c,g=l+d),i.doZoom(n,o,m,g,e)}if(this.con){var e,o=150,i=this,s=this.con,a=this.smallButton,l=this.bigButton;l.onmousedown=function(a){clearInterval(e),t(i.CLICK_ZOOM_RATE,!0),e=setInterval(function(){t(i.ZOOM_RATE,!0)},o);var l=s.children[0];l&&!l.__hasBigBtnLogged&&(n.eventCenter.trigger("ImageZoomed",{event:a||window.event,target:l,to:"big",zoom:"btn"}),l.__hasBigBtnLogged=!0)},a.onmouseup=a.onmouseout=l.onmouseup=l.onmouseout=function(){clearInterval(e),e=null},a.onmousedown=function(a){clearInterval(e),t(i.CLICK_ZOOM_RATE,!1),e=setInterval(function(){t(i.ZOOM_RATE,!1)},o);var l=s.children[0];l&&!l.__hasSmallBtnLogged&&(n.eventCenter.trigger("ImageZoomed",{event:a||window.event,target:l,to:"small",zoom:"btn"}),l.__hasSmallBtnLogged=!0)}}},wheel:function(t){t=t||window.event;var e=this.getZoomCenter(t);if(!e)return!0;{var o,i=this.con.getElementsByTagName("img")[0],s=0,a=parseInt(i.style.width)||i.offsetWidth,l=(parseInt(i.style.height)||i.offsetHeight,e.centerX),r=e.centerY,h=i.srcWidth;i.srcHeight}s=t.wheelDelta?t.wheelDelta:-t.detail,s>0?(o=(a+h*this.ZOOM_RATE)/h,this.doZoom(i,o,l,r,!0),i.__hasBigWheelLogged||(n.eventCenter.trigger("ImageZoomed",{event:t||window.event,target:i,to:"big",zoom:"wheel"}),i.__hasBigWheelLogged=!0)):0>s&&(o=(a-h*this.ZOOM_RATE)/h,this.doZoom(i,o,l,r,!1),i.__hasSmallWheelLogged||(n.eventCenter.trigger("ImageZoomed",{event:t||window.event,target:i,to:"small",zoom:"wheel"}),i.__hasSmallWheelLogged=!0)),t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1)},dbClickZoomIt:function(t){t=t||window.event;var e=this.getZoomCenter(t);if(!e)return!0;var o,i=this.con.getElementsByTagName("img")[0],s=parseInt(i.style.width)||i.offsetWidth,a=e.centerX,l=e.centerY,r=i.srcWidth;o=(s+r*this.options.dbClickZoomRate)/r,this.doZoom(i,o,a,l,!0),i.__hasDbclickLogged||(n.eventCenter.trigger("ImageZoomed",{event:t||window.event,target:i,to:"big",zoom:"dbclick"}),i.__hasDbclickLogged=!0)},getZoomCenter:function(t){if(!this.isZoomImage(t))return!1;var e=i(this.con).offset(),o=i(document).scrollTop(),n=i(document).scrollLeft(),s=(this.con.getElementsByTagName("img")[0],t.clientX+n-e.left),a=t.clientY+o-e.top;return{centerX:s,centerY:a}},isZoomImage:function(t){var e=t.target||t.srcElement,o=this.con.getElementsByTagName("img")[0];return o&&o.__loaded&&e===o},on:function(t,e,o){var i=this._listeners[t]=this._listeners[t]||{callback:[]};i.callback.push({fn:e,data:o||{}})},trigger:function(t,e){var o=this._listeners[t];if(o)for(var i,n,s=o.callback,a=0,l=s.length;l>a;a++)i=s[a],n=i.fn,n.apply(null,[i.data,e])},enableZoomBig:function(){this.enableBig=!0},disableZoomBig:function(){this.enableBig=!1},enableZoomSmall:function(){this.enableSmall=!0},disableZoomSmall:function(){this.enableSmall=!1}},o.exports=s});
;define("searchresult:widget/ui/base/monitorRequest/monitorRequest.js",function(e,t,n){n.exports=function(){var e=(new Date).getTime();return function(t,n){var r=window["__log__"+(new Date).getTime()]=document.createElement("img"),i="",o=(new Date).getTime();return i="lsTime="+(o-e),e=o,r.src=t+"?"+n+"&"+i+"&"+new Date*Math.random(),r.src}}()});
;define("searchresult:widget/ui/base/pms/pms.js",function(n,e,t){{var i=n("common:widget/ui/jquery/jquery.js"),a=n("common:widget/ui/EventEmitter/EventEmitter.js");t.exports=function(){var n,e=a.eventCenter,t=[],o=function(){r(),f()},r=function(){var n=!1,t=!1;"undefined"!=typeof PDC&&(e.on("pms.page.start",function(){PDC.mark("c_firstPageStartLoad")}),e.on("pms.page.complete",function(){PDC.mark("c_firstPageComplete"),PDC.mark("fs"),n=!0,n&&t&&PDC.send()}),e.on("pms.page.ready",function(){}),i(window).on("load",function(){t=!0,n&&t&&PDC.send()}))},f=function(){"undefined"!=typeof AJAX_MONITOR&&"undefined"!=typeof AJAX_MONITOR.PDC&&(n=u(2),n.start_event(),e.on("pms.page.complete",function(){n.view_time(),n.ready()}),e.on("ajaxPms.page.start",function(n){c(n.page),s(n.page),p(n.page)}),e.on("ajaxPms.page.end",function(n){m(n.page),d(n.page),g(n.page)}))},u=function(n){return AJAX_MONITOR.PDC.createInstance(n)},c=function(n){t[n]=u(1)},s=function(n){t[n]&&t[n].start_event()},p=function(n){t[n]&&t[n].start_send()},m=function(n){t[n]&&t[n].transfer_time()},d=function(n){t[n]&&t[n].view_time()},g=function(n){t[n]&&t[n].ready()};return{ini:o}}()}});
;define("searchresult:widget/ui/control/StateController/StateController.js",function(t,e,i){var s=t("common:widget/ui/jquery/jquery.js"),a=t("common:widget/ui/EventEmitter/EventEmitter.js"),n=t("searchresult:widget/ui/base/utils/utils.js"),r=i.exports=function(t,e){this.state=e,this.allState=null,this.strategyHost=t,this.data={},this.viewList=[],this.isInitState=!1,this._isIni=!1};s.extend(r.prototype,{ini:function(t){if(!this._isIni){var e=this;a.eventCenter.on("strategy",function(i){t&&t!=i.strategyType||e.changeState(i.state,i.data,i.strategyType)}),this._isIni=!0}},changeState:function(t,e,i){var s=!1,a=this.state;this.allState=t;for(var n in a)s||"querySign"==n&&-1==t.querySign||(s=this.checkState(n,t[n],a[n])),a[n]=t[n];return s&&(this.isInitState=!0,this.update(t,e,i)),s},checkState:function(t,e,i){return void 0!==e&&!n.compareObj(i,e)},update:function(t,e,i){this.setData(e);for(var e=this.data,s=this.viewList,a=0,n=s.length;n>a;a++){var r=s[a];r.render(t,e,i)}},setData:function(t){this.data=t},addViews:function(){for(var t=arguments,e=this.data,i=this.allState,s=0,a=t.length;a>s;s++){var n=t[s];this.isInitState&&i&&n.render(i,e),this.viewList.push(n)}}})});
;define("searchresult:widget/ui/control/FilterController/FilterController.js",function(t,e,r){var l=t("common:widget/ui/jquery/jquery.js"),n=t("searchresult:widget/ui/control/StateController/StateController.js"),o=function(t,e){var r={isDefaultFilter:null,isShowFilterBar:null,currFilterConf:{},deFaultFilterConf:{}};l.extend(r,e||{}),n.apply(this,[t,r])};l.inherits(o,n),l.extend(o.prototype,{setData:function(t){this.data=t}}),r.exports=o,r.exports.singleton=new o,r.exports.singleton.ini()});
;define("searchresult:widget/ui/control/FilterWidthController/FilterWidthController.js",function(t,e,r){var i=t("common:widget/ui/jquery/jquery.js"),l=t("searchresult:widget/ui/control/StateController/StateController.js"),n=r.exports=function(t,e){var r={currentViewWidth:null,currImgLineWidth:null,isDefaultFilter:null,isShowFilterBar:null,currFilterConf:{},deFaultFilterConf:{}};i.extend(r,e||{}),l.apply(this,[t,r])};i.inherits(n,l),i.extend(n.prototype,{setData:function(t){this.data=t}}),r.exports=n,r.exports.singleton=new n,r.exports.singleton.ini()});
;define("searchresult:widget/ui/control/DisplayTypeController/DisplayTypeController.js",function(e,l,r){BD=window.BD||{},BD.IMG=BD.IMG||{};var o=e("common:widget/ui/jquery/jquery.js"),t=e("searchresult:widget/ui/control/StateController/StateController.js");BD.IMG.DisplayTypeController=r.exports=function(e,l){var r={type:null,querySign:null};o.extend(!0,{},r,l||{}),t.apply(this,[e,r])},o.inherits(BD.IMG.DisplayTypeController,t),r.exports=BD.IMG.DisplayTypeController,r.exports.singleton=new BD.IMG.DisplayTypeController,r.exports.singleton.ini()});
;define("searchresult:widget/ui/control/ImgShowController/ImgShowController.js",function(e,n,t){var r=e("common:widget/ui/jquery/jquery.js"),l=e("searchresult:widget/ui/control/StateController/StateController.js"),o=t.exports=function(e,n){var t={currPageStartPn:null,currPageEndPn:null,currImgLineWidth:null,currPageLineNum:null,cacheStartPn:null,cacheEndPn:null,cachePage:null,cachePageLineNum:null,querySign:null};r.extend(t,n||{}),l.apply(this,[e,t])};r.inherits(o,l),r.extend(o.prototype,{setData:function(e){this.data=e}}),t.exports=o,t.exports.singleton=new o,t.exports.singleton.ini("showImg")});
;define("searchresult:widget/ui/control/PageShowController/PageShowController.js",function(e,t,n){var r=e("common:widget/ui/jquery/jquery.js"),l=e("searchresult:widget/ui/control/StateController/StateController.js"),o=function(e,t){var n={currPageStartPn:null,currPageEndPn:null,currImgLineWidth:null,currPageLineNum:null,querySign:null};r.extend(n,t||{}),l.apply(this,[e,n])};r.inherits(o,l),r.extend(o.prototype,{setData:function(e){this.data=e}}),n.exports=o,n.exports.singleton=new o,n.exports.singleton.ini("displayPage")});
;define("searchresult:widget/ui/control/QuerySignContorller/QuerySignContorller.js",function(e,r,t){var n=e("common:widget/ui/jquery/jquery.js"),o=e("searchresult:widget/ui/control/StateController/StateController.js"),i=t.exports=function(e,r){var t={querySign:null};n.extend(t,r||{}),o.apply(this,[e,t])};n.inherits(i,o),t.exports=i,t.exports.singleton=new i,t.exports.singleton.ini()});
;define("searchresult:widget/ui/model/DataManager/DataManager.js",function(require,exports,module){var $=require("common:widget/ui/jquery/jquery.js"),utils=require("searchresult:widget/ui/base/utils/utils.js"),ParamsBus=require("searchresult:widget/ui/base/ParamsBus/ParamsBus.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.DataManager=module.exports=function(t,e){var i={minPn:0,maxPn:1999,REQUEST_IMG_COUNT:60,urlTpl:"/i?{{=it.query}}"};this.indexStore=[],this.listNum=null,this.blocks=[],this.querySign=new Date*Math.random(),this.callBackSign=new Date*Math.random(),this.callBackFun=null,this.word=ParamsBus.getTplConfItem("queryWordGBKEnc"),this.ie="gbk",this.oe=ParamsBus.getTplConfItem("oe"),this.options=$.extend(i,t||{}),this.infoData=$.extend({},e||{})},BD.IMG.DataManager.prototype={fetchImageIndex:function(t,e,i){var a=this.options;t=Math.min(Math.max(t,a.minPn),a.maxPn),e=Math.min(Math.max(e,a.minPn),a.maxPn);var n=this.getBlock(t,e,void 0,i),s=this.getBlock(t,e,1,i);this.fetchData(n,s,t,e)},getBlock:function(t,e,i){var a=Math.floor(t/this.options.REQUEST_IMG_COUNT),n=Math.floor(e/this.options.REQUEST_IMG_COUNT);n=Math.max(n,a);for(var s=[],r=a;n>=r;r++)this.blocks[r]==i&&s.push(r);return s},getURL:function(t,e){var i={pn:t,rn:e};this.urlTplFun&&(this.urlTplFun=dot.template(this.options.urlTpl));var a=this.urlTplFun(i);return a},fetchData:function(t,e,i,a){var n=this.options.REQUEST_IMG_COUNT,s=this.callBackFun;if(0==t.length)return 0==e.length&&(s?s.apply(window,[{start:i,end:a,indexStore:this.indexStore}]):BD.IMG.publish("model.indexStored",[{start:i,end:a,indexStore:indexStore}])),!0;this.callBackSign=new Date*Math.random();for(var r=t.length,o=0;o<t.length;o++){var l,h,u=n*t[o],d=this.getURL(u)+"&"+new Date*Math.random(),m=this;!function(e,o,u){t.length,t[0]*n;l=function(n,s,l){if(e!=m.querySign)return!0;var h=[];return h.push(t[o]),m.storeData(l.responseText,h)?(r--,0==r&&u==m.callBackSign&&m.callBackFun.apply(window,[{start:i,end:a,indexStore:m.indexStore}]),!0):!1},h=function(){m.blocks[t[o]]=0,u==m.callBackSign&&s.apply(window,[{start:i,end:a,indexStore:m.indexStore}])}}(this.querySign,o,this.callBackSign),$.ajax(d,{dataType:"text"}).done(l).fail(h)}for(var o=0,c=t.length;c>o;o++)this.blocks[t[o]]=1},setInfoData:function(t){for(var e in this.infoData)this.infoData[e]=t[e]},getInfoData:function(t){return this.infoData[t]},storeData:function(data,blockIDs){var REQUEST_IMG_COUNT=this.options.REQUEST_IMG_COUNT;if("string"==typeof data)try{eval("var tempData="+data)}catch(e){return this.setInfoData({displayNum:0,listNum:0,bdIsClustered:0,bdFmtDispNum:0,bdSearchTime:0}),this.listNum=0,!1}else var tempData=data;var items=tempData.data,startIndex=blockIDs[0]*REQUEST_IMG_COUNT,endIndex=(blockIDs[0]+1)*REQUEST_IMG_COUNT;this.setInfoData(tempData),this.listNum=tempData.listNum;for(var i=0,len=items.length-1;len>i;i++){var item=items[i];item=utils.trim(item),item.width&&(item.iwidth=item.width),delete item.width,item.height&&(item.iheight=item.height),delete item.height,this.indexStore[startIndex+i]=item,this.indexStore[startIndex+i].cached=!1,"0,0"==item.is&&(item.is="")}for(var i=0,len=blockIDs.length;len>i;i++)this.blocks[blockIDs[i]]=2;return!0},getData:function(t,e,i){var a=this.options.REQUEST_IMG_COUNT,n=this,s=function(s){t=Math.max(Math.floor(t/a)*a,0),e=(Math.floor(e/a)+1)*a-1,s=s.indexStore.slice(t,e+1),s.listNum=n.listNum,s.bdIsClustered=n.infoData.bdIsClustered,i&&i.apply(window,[s,n.infoData])};this.callBackFun=s,this.fetchImageIndex(t,e,null)},clear:function(){this.indexStore=[],this.blocks=[],this.querySign=new Date*Math.random()}}});
;define("searchresult:widget/ui/model/ImageDataManager/ImageDataManager.js",function(require,exports,module){var $=require("common:widget/ui/jquery/jquery.js"),DataManager=require("searchresult:widget/ui/model/DataManager/DataManager.js"),ParamsBus=require("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),utils=require("searchresult:widget/ui/base/utils/utils.js");BD=window.BD||{},BD.IMG=BD.IMG||{};var isChangeWord="104"===ParamsBus.getTplConfItem("queryClassFlag");BD.IMG.ImageDataManager=module.exports=function(e,t){var i={REQUEST_IMG_COUNT:60,urlTpl:"/i?{{=it.query}}"},a=$.extend(i,e||{});t=$.extend({displayNum:0,listNum:0,bdIsClustered:0,bdFmtDispNum:0,bdSearchTime:0},t),DataManager.apply(this,[a,t])},$.inherits(BD.IMG.ImageDataManager,DataManager),$.extend(BD.IMG.ImageDataManager.prototype,{getURL:function(e){var t={},i=ParamsBus.getSearchConfs();$.extend(i,t);var a=i;a.tn="resultjson_com",a.ipn="rj",a.ie=this.ie,a.oe=this.oe,a.word=ParamsBus.getSubWord&&ParamsBus.getSubWord()||this.word,a.rn=this.options.REQUEST_IMG_COUNT,a.pn=e,a.qc&&(a.qc=a.qc.replace(/\$/g,"%")),a.bq&&""!=a.bq&&(a.word=encodeURIComponent(a.bq),a.ie="utf8");var s=ParamsBus.getTplConfItem("isBizhi");if(s&&parseInt(a.width)>0&&parseInt(a.height)>0){var r=ParamsBus.getTplConfItem("wpaperQueryWithoutSizeGBK");r&&(a.word=r)}if(isChangeWord){var m=utils.decodeURIComponent(ParamsBus.getGlobalConfItem("step_word")||""),n=$.trim(m);m=n.split("$$"),m.length>1?(a.word=encodeURIComponent(n),a.ie="utf-8",a.step_word=encodeURIComponent(n)):a.step_word=""}var o=ParamsBus.getNewURL(a),u="/i?"+utils.json2Query(o,function(e){return e})+"&"+new Date*Math.random();return u},storeData:function(data,blockIDs){var REQUEST_IMG_COUNT=this.options.REQUEST_IMG_COUNT;if("string"==typeof data)try{eval("var tempData="+data)}catch(e){this.setInfoData({displayNum:0,listNum:0,bdIsClustered:0,bdFmtDispNum:0,bdSearchTime:0}),this.listNum=0,ParamsBus.setTplConfItem("dispNum",0);for(var i=0,len=blockIDs.length;len>i;i++)this.blocks[blockIDs[i]]=0;return window.scrollTo(0,0),!1}else var tempData=data;var items=tempData.data,startIndex=blockIDs[0]*REQUEST_IMG_COUNT,endIndex=(blockIDs[0]+1)*REQUEST_IMG_COUNT;this.setInfoData(tempData),ParamsBus.setTplConfItem("dispNum",tempData.displayNum),this.listNum=Math.max(this.listNum||0,tempData.listNum||0);for(var i=0,len=items.length-1;len>i;i++){var item=items[i];item=utils.trim(item),"6"!=item.bdSrcType||ParamsBus.getTplConfItem("isseed")||(ParamsBus.setTplConfItem("isseed",!0),setTimeout(function(){p(null,202,{type:"seed"})},100)),item.width&&(item.iwidth=item.width),delete item.width,item.height&&(item.iheight=item.height),(item.thumbURL.indexOf("&fm=59")>0||item.middleURL.indexOf("&fm=59")>0||item.largeTnImageUrl.indexOf("&fm=59")>0)&&item.hoverURL&&(item.thumbURL=item.middleURL=item.largeTnImageUrl=item.hoverURL),delete item.height,this.indexStore[startIndex+i]=item,this.indexStore[startIndex+i].cached=!1,"0,0"==item.is&&(item.is="")}items.length>1&&items.length-1<REQUEST_IMG_COUNT&&item&&(this.listNum=Math.min(item.pageNum+1,this.listNum));for(var i=0,len=blockIDs.length;len>i;i++)this.blocks[blockIDs[i]]=2;return!0},clear:function(){this.listNum=0,this.indexStore=[],this.blocks=[],this.querySign=new Date*Math.random()}})});
;define("searchresult:widget/ui/model/singleton/ImageDataManager/ImageDataManager.js",function(a,e,g){var t=a("searchresult:widget/ui/model/ImageDataManager/ImageDataManager.js");g.exports=new t});
;define("searchresult:widget/ui/model/PageDataManager/PageDataManager.js",function(require,exports,module){var $=require("common:widget/ui/jquery/jquery.js"),DataManager=require("searchresult:widget/ui/model/DataManager/DataManager.js"),ParamsBus=require("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),utils=require("searchresult:widget/ui/base/utils/utils.js");BD=window.BD||{},BD.IMG=BD.IMG||{};var isChangeWord="104"===ParamsBus.getTplConfItem("queryClassFlag");BD.IMG.PageDataManager=module.exports=function(e){var t={REQUEST_IMG_COUNT:300,urlTpl:"/i?{{=it.query}}"},a=$.extend(t,e||{});DataManager.apply(this,[a])},$.inherits(BD.IMG.PageDataManager,DataManager),$.extend(BD.IMG.PageDataManager.prototype,{getURL:function(e,t){var a=ParamsBus.getHashConf(),r=ParamsBus.getSearchConfs();$.extend(r,a);var i=r;i.tn="baiduimagelargejson",i.ipn="rlj",i.ie=this.ie,i.oe=this.oe,i.word=this.word,i.pn=e,i.rn=t,i.qc&&(i.qc=i.qc.replace(/\$/g,"%"));var n=ParamsBus.getTplConfItem("isBizhi");if(n&&parseInt(i.width)>0&&parseInt(i.height)>0){var s=ParamsBus.getTplConfItem("wpaperQueryWithoutSizeGBK");s&&(i.word=s)}if(isChangeWord){var o=utils.decodeURIComponent(ParamsBus.getGlobalConfItem("step_word")||""),l=$.trim(o);o=l.split("$$"),o.length>1?(i.word=encodeURIComponent(l),i.ie="utf-8",i.step_word=encodeURIComponent(l)):i.step_word=""}var u=ParamsBus.getNewURL(i),d="/i?"+utils.json2Query(u)+"&"+new Date*Math.random();return d},getData:function(e,t,a){var r=(this.options.REQUEST_IMG_COUNT,this),i=function(i){i=i.indexStore.slice(e,t+1),i.listNum=r.listNum,i.bdIsClustered=r.infoData.bdIsClustered,a&&a.apply(window,[i])};this.callBackFun=i,this.fetchImageIndex(e,t,null)},fetchData:function(e,t,a,r){var i=this.options.REQUEST_IMG_COUNT,n=this.callBackFun;if(0==e.length)return 0==t.length&&(n?n.apply(window,[{start:a,end:r,indexStore:this.indexStore}]):BD.IMG.publish("model.indexStored",[{start:a,end:r,indexStore:indexStore}])),!0;this.callBackSign=new Date*Math.random();var s,o,l=e.length,u=i*e[0],d=i*l,g=this.getURL(u,d)+"&"+new Date*Math.random(),h=this;!function(t,u){e.length,e[0]*i;s=function(i,n,s){if(t!=h.querySign)return!0;var o=e;return h.storeData(s.responseText,o)?(l=0,0==l&&u==h.callBackSign&&h.callBackFun.apply(window,[{start:a,end:r,indexStore:h.indexStore}]),!0):!1},o=function(){for(var t=0,i=e.length;i>t;t++)h.blocks[e[t]]=0;u==h.callBackSign&&n.apply(window,[{start:a,end:r,indexStore:h.indexStore}])}}(this.querySign,this.callBackSign),$.ajax(g,{dataType:"text"}).done(s).fail(o);for(var c=0,m=e.length;m>c;c++)this.blocks[e[c]]=1},storeData:function(data,blockIDs){var REQUEST_IMG_COUNT=this.options.REQUEST_IMG_COUNT;if("string"==typeof data)try{eval("var tempData="+data)}catch(e){return this.setInfoData({listNum:0}),this.listNum=0,!1}else var tempData=data;var items=tempData.data,startIndex=blockIDs[0]*REQUEST_IMG_COUNT,endIndex=(blockIDs[0]+1)*REQUEST_IMG_COUNT;this.setInfoData(tempData),this.listNum=tempData.listNum||0;for(var i=0,len=items.length-1;len>i;i++){var item=items[i];this.indexStore[startIndex+i]=item}for(var i=0,len=blockIDs.length;len>i;i++)this.blocks[blockIDs[i]]=2;return!0}})});
;define("searchresult:widget/ui/model/singleton/PageDataManager/PageDataManager.js",function(a,e,g){var t=a("searchresult:widget/ui/model/PageDataManager/PageDataManager.js");g.exports=new t({REQUEST_IMG_COUNT:60})});
;define("searchresult:widget/ui/strategy/StrategyClass/StrategyClass.js",function(t,e,s){var a=t("common:widget/ui/jquery/jquery.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.StrategyClass=s.exports=function(){},a.extend(BD.IMG.StrategyClass.prototype,{calc:function(){}})});
;define("searchresult:widget/ui/strategy/FilterStrategy/FilterStrategy.js",function(e,t,l){var a=e("common:widget/ui/jquery/jquery.js"),r=e("searchresult:widget/ui/strategy/StrategyClass/StrategyClass.js"),u=e("searchresult:widget/ui/base/ParamsBus/ParamsBus.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.FilterStrategy=l.exports=function(e,t){var l={isShow:!1},u={ic:{defaultValue:"0",currValue:"0",emptyValue:"0"},width:{defaultValue:"0",currValue:"0",emptyValue:"0"},height:{defaultValue:"0",currValue:"0",emptyValue:"0"},z:{defaultValue:"0",currValue:"0",emptyValue:"0"},st:{defaultValue:"-1",currValue:"-1",emptyValue:"-1"},face:{defaultValue:"0",currValue:"0",emptyValue:"0"},lm:{defaultValue:"-1",currValue:"-1",emptyValue:"-1"},s:{defaultValue:"0",currValue:"0",emptyValue:"0"},tab:{defaultValue:"0",currValue:"0",emptyValue:"0"}};r.apply(this,[]),this.options=a.extend(l,e||{}),this.filterConf=a.extend(u,t||{}),this.defaultFilterValue=null},a.inherits(BD.IMG.FilterStrategy,r),a.extend(BD.IMG.FilterStrategy.prototype,{calc:function(){return this.getFilterState()},getCurrFilterConf:function(){var e={},t=this.filterConf,l=u.getGlobalConfs();for(var a in t)e[a]="0"===l[a]?l[a]:l[a]||this.defaultFilterValue&&this.defaultFilterValue[a]||t[a].defaultValue;return e},getDefaultFilterConf:function(){this.defaultFilterValue;if(!this.defaultFilterValue){this.defaultFilterValue={};var e=(this.defaultFilterValue,this.filterConf);for(var t in e)this.defaultFilterValue[t]=e[t].defaultValue}var l=u.getGlobalConfs();return this.defaultFilterValue.tab=l.tab||"0",this.defaultFilterValue},checkISDefaultFilter:function(e,t){e=e||this.getCurrFilterConf(),t=t||this.getDefaultFilterConf();for(var l in t)if(t[l]!==e[l])return!1;return!0},getFilterState:function(){var e=this.getCurrFilterConf(),t=this.getDefaultFilterConf(),l=this.checkISDefaultFilter(e,t);return{currFilterConf:e,deFaultFilterConf:t,isShowFilterBar:!0,isDefaultFilter:l}}})});
;define("searchresult:widget/ui/strategy/Command/Command.js",function(t,n,i){BD=window.BD||{},BD.IMG=BD.IMG||{};var o=function(){this.commandList=[];var t,n=!0,i=!1,o=0,r=!0;this.key=999*(new Date).getTime(),this.exe=function(t,n,o){return i?void 0:(this.commandList.push({fun:t,context:n,args:o}),this)},this.stop=function(){n=!0},this.start=function(){return 0!=n&&!i&&r?(n=!1,r=!1,this.go()):void 0},this.next=function(t){return 0==n||i?void 0:(n=!1,t=t||1,o=Math.max(0,o-1+t),this.go())},this.pre=function(t){return 0==n||i?void 0:(t=t||1,n=!1,o=Math.max(0,o-1-t),this.go())},this.go=function(){for(var t;(t=this.commandList[o])&&!n;){var i=t.fun,s=t.context||null,e=t.args||[];o++,i.apply(s,e)}return n=!0,t||(r=!0),this},this.clear=function(){return n=!1,t=null,this.commandList=[],this},this.distroy=function(){this.clear(),i=!0},this.getData=function(){return t},this.setData=function(n){i||(t=n)}};BD.IMG.Command=i.exports=function(){var t,n=function(){return t&&t.distroy(),t=new o};return{getCurrCommand:function(){return t?t:n()},getNewCommand:n}}()});
;define("searchresult:widget/ui/strategy/ImgStrategy/ImgStrategy.js",function(i,e,t){var n=i("common:widget/ui/jquery/jquery.js"),a=i("searchresult:widget/ui/strategy/StrategyClass/StrategyClass.js"),r=i("searchresult:widget/ui/base/utils/utils.js"),h=i("searchresult:widget/ui/base/StaticGlobalConf/StaticGlobalConf.js"),s=i("searchresult:widget/ui/base/ParamsBus/ParamsBus.js");BD=window.BD||{},BD.IMG=BD.IMG||{};var l=n.browser.ie&&6==parseInt(n.browser.version);BD.IMG.ImgStrategy=t.exports=function(i){var e={margin:h.get("margin"),liPadding:h.get("padding"),lineHeight:h.get("lineHeight"),lineWidth:1200,totalHeight:450,maxImgWidth:h.get("maxImgWidth"),pageLineNum:3};a.apply(this,[]),this.options=n.extend(e,i||{})},n.inherits(BD.IMG.ImgStrategy,a),n.extend(BD.IMG.ImgStrategy.prototype,{setDisplayConf:function(i){var e=this.options;e.lineWidth=i.lineWidth,e.lineHeight=i.lineHeight},calcImg:function(i){for(var e=this.options,t=!0,n=!1,a=0,r=i.length;r>a;a++)n=a==r-1&&1==i.isNotFull?!0:!1,this.analyseLine(i[a],n),(i[a].baseLineH!=e.lineHeight||i[a].baseLineW!=e.lineWidth||l)&&(t=!1),"SME"==i[a].type&&"special"==i[a].imgType&&(t=!1);var h=this.connectArray(i);return h},analyseLine:function(i,e){for(var t=(this.options,[]),n=[],a=0,r=0,h="",s=0,l=i.length;l>s;s++){var g=i[s];g.liHeight=g.imgBaseHeight,g.liWidth=g.imgBaseWidth,g.liWidth>g.liHeight?(t.push(g),a+=g.liWidth):(n.push(g),r+=g.liWidth),"SME"==g.type&&(h="SME")}i.lineH=i.baseLineH,i.lineWimgs=t,i.lineWimgWidth=a,i.lineHimgs=n,i.lineHimgWidth=r,i.type=h,1==e&&(i.lineW=Math.max(i.lineW,i.baseLineW),i.isNotFull=!0)},fixHight:function(i){for(var e=this.options,t=0,n=0,a=0;a<i.length;a++)t+=(i[a].baseLineW+Math.max(i[a].lineHimgWidth*n-.5*i[a].baseLineW,0))*(2*i[a].baseLineW-i[a].lineW)/(i[a].baseLineW*i[a].baseLineW);for(var r=e.lineHeight*i.length,h=r/t,a=0;a<i.length;a++)i[a].lineH=parseInt((i[a].baseLineW+Math.max(i[a].lineHimgWidth*n-.5*i[a].baseLineW,0))*(2*i[a].baseLineW-i[a].lineW)/(i[a].baseLineW*i[a].baseLineW)*h)},fixWidth:function(i){{var e=this.options,t=i.lineH,n=0,a=0;i.sme||0}for(a=0;a<i.length;a++){var h=i[a];h.lineH=t,h.liWidth=r.zoomImg(h).width,h.liHeight=t,n+=h.liWidth+e.margin+2*e.liPadding}i.lineW=n},fixLines:function(i){var e=i.baseLineW-i.lineW;if(i.isNotFull&&(e=Math.min(0,e)),e>0)this.averageLiWidth(i,e,!1);else{var t=i.lineWimgs;(!t||0==t.length||Math.abs(e/t.length)>30||6==BD.IMG.ie)&&(t=i),this.averageLiWidth(t,e)}this.fixImgDisplay(i)},averageLiWidth:function(i,e){var t,n=0;for(t=0;t<i.length;t++){var a=i[t];"SME"!=a.type&&(n+=i[t].liWidth)}var r=e/n;for(t=0;t<i.length;t++){var h=i[t];"SME"!=h.type&&(h.liWidth=parseInt(h.liWidth+h.liWidth*r))}},fixImgDisplay:function(i){for(var e=0,t=i.length,n=this.options.maxImgWidth;t>e;e++){var a=i[e],h=a.liWidth,s=Math.max(a.lineH,parseInt(h*a.iheight/a.iwidth));a.lineH=a.iheight/a.iwidth>a.liHeight/a.liWidth?Math.min(1.2*a.lineH,s):Math.min(1.15*a.lineH,s);var l=a.offset=r.zoomImg(a,n);a.matchURL=this._pickURL(l.width,l.height,a)}},getSam:function(i){var e=0;i=i.replace(":FG=1",""),i+=":FG=1";for(var t=0;t<i.length;t++)e=31*e+i.charCodeAt(t),e%=4294967296;var n=e%101;return n},_pickURL:function(i,e,t){var a=e,r=t.largeTnImageUrl,h=this.getSam(n.cookie("BAIDUID"));return h>=50&&t.hoverURL?r=t.hoverURL:a>=230&&t.hoverURL?r=t.hoverURL:(a>=140&&170>=a||""==r)&&t.middleURL&&(r=t.middleURL),(140>a||""==r)&&(r=t.thumbURL),s.getTplConfItem("isWebp")&&1==n.browser.chrome&&0==t.bdSrcType&&(r=r.replace(/fm=21(&|\.|$)/i,function(i,e){return"fm=200"+e}).replace(/\.(jpg|jpeg|png|gif)$/,".webp")),r},_pickURLIE6:function(i,e,t){var n=Math.max(i,e),a=t.largeTnImageUrl;return(n>=150&&185>=n||""==a)&&(a=t.middleURL),(150>n||""==a)&&(a=t.thumbURL),a},connectArray:function(i){for(var e=[],t=0,n=0,a=this.options.margin,r=this.options.liPadding,s=0;s<i.length;s++){var l=i[s];this.fixWidth(l),this.fixLines(l),n=l.left;for(var g=0;g<l.length;g++){var o=l[g];o.top=t,o.left=n,e.push(o),n+=o.liWidth+a+2*r}t+=l.lineH+h.get("imgDigestHeight")+a+r}return e},calc:function(i){return this.calcImg(i)}})});
;define("searchresult:widget/ui/strategy/PageStrategy/PageStrategy.js",function(e,t,i){var n=e("common:widget/ui/jquery/jquery.js"),a=e("searchresult:widget/ui/base/utils/utils.js"),s=e("searchresult:widget/ui/strategy/StrategyClass/StrategyClass.js"),g=e("searchresult:widget/ui/base/StaticGlobalConf/StaticGlobalConf.js"),h=e("searchresult:widget/ui/strategy/singleton/FilterStrategy/FilterStrategy.js"),r=e("searchresult:widget/fcAd/fcAd.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.PageStrategy=i.exports=function(e){var t={margin:g.get("margin"),liPadding:g.get("padding"),lineHeight:140,lineWidth:1200,totalHeight:450,maxImgWidth:g.get("maxImgWidth"),minBaseLineHeight:g.get("minBaseLineHeight"),pageLineNum:3};this.strategyConf={lineConfList:[{left:0},{left:0}],pageConfList:[{},{lineNum:3}]},s.apply(this,[]),this.options=n.extend(t,e||{})},n.inherits(BD.IMG.PageStrategy,s),n.extend(BD.IMG.PageStrategy.prototype,{setLineConfList:function(e){this.strategyConf.lineConfList=e},getLineConfList:function(){var e=h.calc();return e.isDefaultFilter&&0===(parseInt(e.currFilterConf.tab)||0)?this.strategyConf.lineConfList:{}},setPageConfList:function(e){this.strategyConf.pageConfList=e},setDisplayConf:function(e,t,i){e&&(this.options.lineHeight=t),t&&(this.options.lineWidth=e),BD.IMG.tplConf.isInteract&&"must"==BD.IMG.tplConf.isInteract&&t&&(this.options.lineWidth=e-165),i&&(this.options.pageLineNum=i)},getMaxLineWidth:function(e){return e+1.2*Math.max(145-35e3/e,0)},checkLine:function(e,t,i,n,a,s,g){var h=this.options,r=n+h.margin+2*h.liPadding;return e+s+g>t+r},getMaxPage:function(e){var t=this.options,i=e.length;return Math.ceil(i/t.pageLineNum)},getCurrentPage:function(e,t){var i=t[t.length-1],n=this.options,a=n.lineHeight,s=n.lineWidth,g=n.pageLineNum,h=Math.floor(e*a/s/g)+1;if(!i||e>i.endPn)return Math.max(h,1);h=Math.min(h,t.length-1);for(var r,l=null;(r=t[h])&&0!==l&&!(r.startPn<=e&&e<=r.endPn||!r.startPn&&0!==r.startPn||!r.endPn&&0!==r.endPn);)r.startPn>e?(h--,l=l?Math.max(l-1,-1):-1):r.endPn<e&&(h++,l=l?Math.min(l+1,1):1);return Math.max(h,1)},calcZoomImg:function(e){for(var t=this.options,i=0,n=e.length;n>i;i++){var s=e[i];if(!s)break;var g=s,h=a.zoomLi(g,t.lineHeight);g.imgBaseWidth=parseInt(Math.min(parseInt(h.width),t.maxImgWidth)),g.imgBaseHeight=parseInt(h.height),e[i]=g}return e},calcPageRange:function(e,t){t=t||0;var i=this.getCurrentPage(t,e),n=i&&e[i]?e[i].endPn:t+59;return{currPage:i,startPn:t,endPn:n}},getbaseLineConf:function(e,t){var i=this.options,n={},a=this.getLineConfList(),s=a[(e-1)*i.pageLineNum+t]||{};n.lineWidth=Math.min(s&&s.lineWidth||i.lineWidth),n.lineHeight=s.lineHeight||i.lineHeight,r&&r.updataLineConf&&r.updataLineConf(s,i,e,t),n.left=0;var g=!1,h=i.lineWidth;return s&&s.right&&(h-=s.right,g=!0),s&&s.left&&(h-=s.left,n.left=s.left,g=!0),n.lineWidth=Math.max(0,Math.min(n.lineWidth,h)),n.isFixedHeight=g,n},getPageConf:function(e){e=e||1;var t={},i=this.strategyConf.pageConfList[e]||{},n=i.lineNum,a=this.options.pageLineNum;return void 0!==n?"string"==typeof n&&(n=a+parseInt(n)):n=a,t.lineNum=Math.max(n,2),t},calcLineOnePage:function(e,t,i){var n,a,s=e.length,g=this.options,h=0,r=0,l=0,o=0,u=g.margin,f=g.liPadding,m=this.getPageConf(i).lineNum,d=0,c=g.lineHeight,p=[],L=[];p.isNotFull=!0;var P=this.getbaseLineConf(i,r);n=P.lineWidth,a=P.lineHeight,p.startPn=t,p.endPn=t;var H=0,C=0,y=a,W=this.options.minBaseLineHeight,B=0,M=0,b=0;for(h=t,o=0;s>h;){var v=e[h];if(!v)break;if(v.baseLineH=a,B=(B*o+v.imgBaseHeight)/(o+1),b+=Math.max(0,(v.imgBaseHeight-B)/v.imgBaseHeight*v.imgBaseWidth),M=B,this.checkLine(n,l,L.length,v.imgBaseWidth,v.imgBaseHeight,b,B)?(l+=v.imgBaseWidth*a/c+u+2*f,H+=v.imgBaseHeight,C+=v.imgBaseWidth*a/c,v.imgBaseHeight>=W&&v.imgBaseHeight<y&&(y=v.imgBaseHeight),L.push(v),h++,o++):(L.lineW=l,L.baseLineW=n,P.isFixedHeight?L.baseLineH=a:(B=Math.min(a,B/l*(n+b)),L.baseLineH=B),L.lineW=C*L.baseLineH/a+(u+2*f)*L.length,d+=L.baseLineH+u+f,L.left=P.left,p.push(L),p.isNotFull=!1,p.pageHeight=d,p.endPn=L.length?L[L.length-1].pageNum:h,r++,P=this.getbaseLineConf(i,r),n=P.lineWidth,a=P.lineHeight,L=[],l=0,H=0,C=0,B=0,b=0,o=0,y=a),r>=m){p[p.length-1].length||(p.endPn=h-1);break}}if(L.length>0){L.lineW=Math.max(l,n),L.baseLineW=n,L.baseLineH=a,p.push(L),d+=a+u+f,p.pageHeight=d;var P=this.getbaseLineConf(i,r);n=P.lineWidth,a=P.lineHeight,L.left=P.left,p.isNotFull=!0,p.endPn=L[L.length-1].pageNum,L=[],l=0}return p},calc:function(e){var t,i=Array.prototype.slice.apply(arguments,[1,arguments.length]);switch(e){case"page":t=this.calcPageRange.apply(this,i);break;case"img":t=this.calcZoomImg.apply(this,i);break;case"calcLine":t=this.calcLineOnePage.apply(this,i)}return t}})});
;define("searchresult:widget/ui/strategy/SMEStrategy/SMEStrategy.js",function(t,e,r){var i=t("common:widget/ui/jquery/jquery.js"),s=t("searchresult:widget/ui/strategy/StrategyClass/StrategyClass.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.SMEStrategy=r.exports=function(t){s.apply(this,[]),this.smeCount=t},i.inherits(BD.IMG.SMEStrategy,s),i.extend(BD.IMG.SMEStrategy.prototype,{calc:function(){var t=[];return this.smeCount&&(t=this._calc()),t},_calc:function(){for(var t=this.smeCount,e=[],r=0;t>r;r++){var i={iwidth:185,iheight:158,hasLarge:0,type:"SME",maxWidth:165,minWidth:165,smeIndex:r};e.push(i)}return e}})});
;define("searchresult:widget/ui/strategy/PullDisplayStrategy/PullDisplayStrategy.js",function(e,t,i){var a=e("common:widget/ui/jquery/jquery.js"),s=e("searchresult:widget/ui/strategy/StrategyClass/StrategyClass.js"),n=e("searchresult:widget/ui/base/StaticGlobalConf/StaticGlobalConf.js"),g=e("searchresult:widget/ui/base/ParamsBus/ParamsBus.js");BD=window.BD||{},BD.IMG=BD.IMG||{};var r=g.getTplConfItem("aldResult")===!0,l=parseInt(g.getTplConfItem("sme"))>0;BD.IMG.PullDisplayStrategy=i.exports=function(e){var t={margin:90-n.get("margin"),imgMargin:n.get("margin"),imgPadding:n.get("padding"),baseLineHeight:n.get("lineHeight"),maxBaseLineHeight:n.get("maxBaseLineHeight"),minBaseLineHeight:n.get("minBaseLineHeight")};s.apply(this,[]),this.options=a.extend(t,e||{})},a.inherits(BD.IMG.PullDisplayStrategy,s),a.extend(BD.IMG.PullDisplayStrategy.prototype,{calc:function(){var e=a(window),t=Math.max(1e3,e.width()),i=e.height(),s=0,n=t-s-this.options.margin,h=Math.max(this.options.minBaseLineHeight,Math.min(this.options.maxBaseLineHeight,Math.round((i-40-160)/3)));r?h=g.getTplConfItem("fixHeight")||148:l&&(h=148);var o=t,u=3;return{lineNum:u,lineWidth:n,lineHeight:h,viewWidth:o,viewHeight:i}}})});
;define("searchresult:widget/ui/strategy/StrategyHostClass/StrategyHostClass.js",function(t,e,s){var i=t("common:widget/ui/jquery/jquery.js"),a=t("common:widget/ui/EventEmitter/EventEmitter.js").eventCenter;BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.StrategyHostClass=s.exports=function(){this.currState={},this.strategyList={},this.cmdList=[],this.cmd=null},i.extend(BD.IMG.StrategyHostClass.prototype,{ini:function(){},clearCurrState:function(){},addStrategy:function(t,e){this.strategyList[t]=e},update:function(t,e,s){a.trigger(t,{data:e,state:this.currState,strategyType:s||""})},addCalcCommand:function(t,e){this.cmdList[t]=e},calc:function(t){var e=this.cmdList[t];e&&"function"==typeof e&&e.apply(this,[])}})});
;define("searchresult:widget/ui/strategy/ScrollStrategy/ScrollStrategy.js",function(t,e,r){var i=t("common:widget/ui/jquery/jquery.js"),s=t("common:widget/ui/EventEmitter/EventEmitter.js"),o=t("searchresult:widget/ui/strategy/StrategyClass/StrategyClass.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.ScrollStrategy=r.exports=function(t){var e={};o.apply(this,[]),this.pagePos=null,this.options=i.extend(e,t||{});var r=this;this.$win=i(window),s.eventCenter.on("Imgid-Top-Change",function(){r.pagePos=null})},i.inherits(BD.IMG.ScrollStrategy,o),i.extend(BD.IMG.ScrollStrategy.prototype,{calc:function(){var t={};null===this.pagePos&&(this.pagePos=i("#imgid").offset().top||110);var e=this.$win.scrollTop(),r=this.pagePos;return t.scrollTop=Math.max(e-r,0),t}})});
;define("searchresult:widget/ui/strategy/PullStrategyHostOpt/PullStrategyHostOpt.js",function(t,e,a){BD=window.BD||{},BD.IMG=BD.IMG||{};var r=t("common:widget/ui/jquery/jquery.js"),i=(t("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),t("searchresult:widget/ui/strategy/Command/Command.js")),n=t("searchresult:widget/ui/base/StaticGlobalConf/StaticGlobalConf.js"),s=(t("searchresult:widget/ui/base/utils/utils.js"),t("searchresult:widget/ui/strategy/singleton/ImgStrategy/ImgStrategy.js")),c=t("searchresult:widget/ui/strategy/singleton/PageStrategy/PageStrategy.js"),g={},o=t("searchresult:widget/ui/strategy/singleton/SMEStrategy/SMEStrategy.js"),u=t("searchresult:widget/ui/strategy/singleton/DisplayStrategy/DisplayStrategy.js"),m=t("searchresult:widget/ui/strategy/singleton/FilterStrategy/FilterStrategy.js"),l=t("searchresult:widget/ui/strategy/StrategyHostClass/StrategyHostClass.js"),h=t("searchresult:widget/ui/strategy/singleton/ScrollStrategy/ScrollStrategy.js"),d=t("searchresult:widget/ui/base/statistic/statistic.js");BD.IMG.StrategyHost=a.exports=function(t){l.apply(this,[]),this.imgDispData=[],this.imgPageData=[],this.imgPageData.lastPage=0,this.currPageTurn=[],this.cachePageList=[],this.preImgList=[],this.cachePage=[],this.commandType="",this.dataStore={imgStore:null,pageStore:null},this.strategyList={filterStrategy:m,imgStrategy:s,pageStrategy:c,pageTurnStrategy:g,smeStrategy:o,displayStrategy:u,scrollStrategy:h},this.pageMoreNum=10,this.isCache=!1,this.cacheNum=1,this.pageTurnInfo={},this.extState=t||{},this.currState=r.extend({querySign:(new Date).getTime(),currMaxPage:10,type:"",currPn:0,currPage:0,maxPage:0,listNum:null,minPn:0,currentViewWidth:0,currentViewHeight:0,currPageStartPn:0,currPageEndPn:0,currImgLineWidth:0,currImgLineHeight:0,currURLMap:0,currPageLineNum:0,cacheStartPn:0,cacheEndPn:0,cachePage:0,cachePageLineNum:0,IsClustered:0,isDefaultFilter:!0,isShowFilterBar:!1,currFilterConf:{},deFaultFilterConf:{},isNextPageCalc:!1},t||{}),this.defaultState=r.extend({},this.currState),this.lastpage=1,this.nextPage=1},r.inherits(BD.IMG.StrategyHost,l),r.extend(BD.IMG.StrategyHost.prototype,{ini:function(){var t=this.strategyList.smeStrategy.calc();this.setPreList(t),this.setIntCmd(),this.setResizeCmd(),this.setPageTurnCmd(),this.setFilterCmd(),this.setCacheCmd(),this.setScrollCmd(),this.setMorePageCmd(),this.setClearScrollCmd()},iniPreList:function(){var t=this.strategyList.smeStrategy.calc();this.setPreList(t)},reset:function(){this.currState=r.extend({},this.defaultState),this.commandType=""},setPreList:function(t){var e=this.currState.minPn;e-=t.length;for(var a=0,r=t.length;r>a;a++){var i=t[a];i.pageNum=e+a,this.preImgList.push(i)}this.currState.minPn=e,this.formatImgToImgDispData(t)},setImgStore:function(t){this.dataStore.imgStore=t},setPageStore:function(t){this.dataStore.pageStore=t},clearImgPageData:function(){this.imgPageData=[],this.cachePageList=[],this.imgPageData.lastPage=0},claerImgDispData:function(){this.imgDispData=[]},clearCurrState:function(){this.currState=r.extend({},this.defaultState),this.currState.querySign=(new Date).getTime()},setImgDispData:function(t){for(var e=this.imgDispData,a=0,r=t.length;r>a;a++){var i=t[a];if(i){var n=i.pageNum;e[n]=e[n]&&e[n].objURL&&!i.objURL?e[n]:i}}},calcCurrentDisplayRange:function(){var t=this.currState,e=this.strategyList.displayStrategy.calc(t.type),a=t.currImgLineWidth!=e.lineWidth||t.currImgLineHeight!=e.lineHeight||t.currentViewWidth!=e.viewWidth;return t.currImgLineWidth=e.lineWidth,t.currImgLineHeight=e.lineHeight,t.currentViewWidth=e.viewWidth,t.currentViewHeight=e.viewHeight,this.strategyList.pageStrategy.setDisplayConf(t.currImgLineWidth,t.currImgLineHeight,e.lineNum),this.strategyList.imgStrategy.setDisplayConf({lineWidth:t.currImgLineWidth,lineHeight:t.currImgLineHeight}),a},setScrollPos:function(){var t=this.strategyList.scrollStrategy.calc(),e=this.currState;e.scrollTop=t.scrollTop,e.currPn=void 0},initFilterConf:function(){var t=this.strategyList.filterStrategy.calc(),e=this.currState;e.isDefaultFilter=t.isDefaultFilter,e.isShowFilterBar=t.isShowFilterBar,e.currFilterConf=t.currFilterConf,e.deFaultFilterConf=t.deFaultFilterConf},formatImgToImgDispData:function(t){var e=this.strategyList.pageStrategy.calc("img",t);this.setImgDispData(e)},calcOnePageLine:function(t,e){var a=this.strategyList.pageStrategy.calc("calcLine",this.imgDispData,t,e);return a},calcImgDisplay:function(t){var e=this.strategyList.imgStrategy.calc(t);return this.setImgDispData(e),e},calcCurrentPage:function(t){for(var e=this.imgPageData,a=0,r=e.lastPage||0,i=n.get("pageNumHeight"),s=0,c=this.currState.currentViewHeight,g=1,o=1,u=e.length;u>o;o++){var m=e[o];if(!m){a=o;break}var l=s;if(s+=(m.pageHeight||0)+i,Math.max(0,l-t)+Math.max(0,t+c-s)<=c/2||l>=t&&t+c>=s){a=o,g=o+1;break}}if(a||(a=r+1,g=a),e[g]){for(var h="",P=0,S=e[g].data,P=e[g].startPn,o=0;o<S.length;o++)h+=""==S[o].cs?"0,0$"+encodeURIComponent(BD.IMG.utils.codeCompiler.uncompileURL(S[o].objURL))+"|":S[o].cs+"$"+encodeURIComponent(BD.IMG.utils.codeCompiler.uncompileURL(S[o].objURL))+"|";if(g>this.nextPage){if(this.lastpage=this.nextPage,this.nextPage=g,g-this.lastpage>=2)for(var o=1;o<g-this.lastpage;o++)this.sendcss(e,this.lastpage+o);d(null,57,{cs:h,pn:P,cp:a})}}return a},sendcss:function(t,e){for(var a="",r=0,i=t[e].data,r=t[e].startPn,n=0;n<i.length;n++)a+=""==i[n].cs?"0,0$"+encodeURIComponent(BD.IMG.utils.codeCompiler.uncompileURL(i[n].objurl))+"|":i[n].cs+"$"+encodeURIComponent(BD.IMG.utils.codeCompiler.uncompileURL(i[n].objurl))+"|";d(null,57,{cs:a,pn:r})},getList:function(t,e,a){var r=[];if(e>=0&&a>=0&&a>=e)r=this.imgDispData.slice(e,a+1);else for(var i=e,n=t.length;n>i&&a>=i;i++)r.push(t[i]);return r},getImgDispData:function(t,e){var a=this.getList(this.imgDispData,t,e);return a},getImgPageData:function(t,e){var a=this.getList(this.imgPageData,t,e);return a},calc:function(t){var e=this.cmdList[t];e&&"function"==typeof e&&e.apply(this,[])},addCalcCommand:function(t,e){this.cmdList[t]=e},showPageCommand:function(t){var e=this,a=null;t.exe(function(){var t=e.currState;e.cachePage=[],a=t.currPage,e.cacheNum=3;t.currPage}).exe(function(){var t=e.currState;t.currPage=e.calcCurrentPage(t.scrollTop)}).exe(function(){var t=e.currState,r=e.imgPageData,i=t.currPage;a!=i&&"scroll"!==e.currState.type&&(e.cachePage=[]);for(var n=0;6>n;n++)i+n<=e.currState.currMaxPage&&(!r[i+n]||r[i+n].isShow!==!0)&&e.cachePage.push(i+n)})},setCurrentPageInfo:function(){var t=this.currState,e=t.currPage,a=this.imgPageData[e];a&&(t.currPageStartPn=a.startPn,t.currPageEndPn=a.endPn,t.currPageLineNum=a.lineNum)},cacheImgCommand:function(t){var e=this;t.exe(function(){var a=e.currState,r=(a.currPage,e.currState.currPage),i=e.cachePage[0];i||(e.setCurrentPageInfo(),e.currState.currPage>e.currState.currMaxPage&&(r=e.currState.currMaxPage),e.update("strategy",e.imgPageData[r].data,"displayPage"),t.clear());var n=e.imgPageData[i];if(n){if(a.cachePage=i,a.cacheStartPn=n.startPn,a.cacheEndPn=n.endPn,n.data)return t.stop(),void t.next(4)}else{var s=e.imgPageData[i-1];a.cachePage=i,s?(a.cacheStartPn=s.endPn+1,a.cacheEndPn=s.endPn+60):1==i&&(a.cacheStartPn=a.minPn,a.cacheEndPn=a.minPn+59)}}).exe(function(){var a=e.currState;t.stop(),e.dataStore.imgStore.getData(a.cacheStartPn,a.cacheEndPn,function(e){t.setData(e),t.next()})}).exe(function(){var a=e.currState,r=t.getData();a.listNum=r.listNum,e.formatImgToImgDispData(r)}).exe(function(){var a=e.currState,r=a.cachePage,i=(a.currPage,e.calcOnePageLine(a.cacheStartPn,r));if(i.isNotFull&&i.endPn+1<a.listNum)return a.cacheEndPn=a.cacheStartPn+59,t.stop(),void t.pre(2);a.cacheStartPn=i.startPn,a.cacheEndPn=i.endPn,a.cachePageLineNum=i.length;var s=0,c=n.get("pageNumHeight");if(r>1){var g=e.imgPageData[r-1];g?(s=g.pageTop||0,s+=g.pageHeight+(r>2?c:0),BD.IMG.tplConf.recommendPage==r-1&&(s+=BD.IMG.tplConf.recommendHeight)):s=null}e.imgPageData[r]={startPn:i.startPn,endPn:i.endPn,lineNum:i.length,pageHeight:i.pageHeight,pageTop:s,isShow:!1,isCache:!1,data:null},e.imgPageData.lastPage=Math.max(r,e.imgPageData.lastPage);var o=e.calcImgDisplay(i),u=e.imgPageData[r].pageHeight,m=e.imgPageData[r].pageTop;o.pageHeight=u,o.pageTop=m,e.imgPageData[r].data=o}).exe(function(){var t=e.currState,a=t.cachePage,r=t.currPage,i=e.imgPageData[a],n=i.data;e.cachePage.splice(0,1),e.setCurrentPageInfo(),r+2>=a&&!i.isShow?(e.update("strategy",n,"showImg"),i.isShow=!0,i.isCache=!0):i.isCache||(e.update("strategy",n,"cacheData"),i.isCache=!0,setTimeout(function(){e.calc("cacheImg")},100)),e.update("strategy",e.imgPageData[r].data,"displayPage")})},setMorePage:function(){this.currState.currMaxPage+=this.pageMoreNum},setScrollPosCmd:function(t){var e=this;t.exe(function(){e.setScrollPos()})},setMoreCmd:function(t){var e=this;t.exe(function(){var t=e.currState.currMaxPage;e.setMorePage(),e.cachePage.push(t+1),e.cachePage.push(t+2),e.calc("cacheImg")})},clearStoreCommand:function(t){var e=this;t.exe(function(){e.dataStore.imgStore.clear(),e.dataStore.pageStore.clear()})},clearStrategyCommand:function(t){var e=this;t.exe(function(){e.claerImgDispData(),e.clearCurrState(),e.initFilterConf(),e.iniPreList()})},getDisplayRangeCommand:function(t){var e=this;t.exe(function(){e.clearImgPageData(),e.currState.type=e.commandType;var a=e.calcCurrentDisplayRange();e.currState.currPage=null,a||"resize"!=e.commandType||t.clear()})},setIntCmd:function(){var t="ini",e=this,a=function(){e.currState.type=e.commandType=t;var a=(e.currState,i.getNewCommand());e.clearStrategyCommand(a),e.getDisplayRangeCommand(a),e.setScrollPosCmd(a),e.showPageCommand(a),e.cacheImgCommand(a),a.start()};this.addCalcCommand(t,a)},setFilterCmd:function(){var t="imgFilter",e=this,a=function(){e.currState.type=e.commandType=t;var a=(e.currState,i.getNewCommand());a.exe(function(){window._disableScroll=!0}),e.clearStoreCommand(a),e.clearStrategyCommand(a),e.getDisplayRangeCommand(a),e.setScrollPosCmd(a),e.showPageCommand(a),e.cacheImgCommand(a),a.exe(function(){window._disableScroll=!1}),a.start()};this.addCalcCommand(t,a)},setPageTurnCmd:function(){var t="pageTurn",e=this,a=function(){e.currState.type=e.commandType=t;var a=(e.currState,i.getNewCommand());e.showPageCommand(a),e.cacheImgCommand(a),a.start()};this.addCalcCommand(t,a)},setResizeCmd:function(){var t="resize",e=this,a=function(){e.currState.type=e.commandType=t;var a=(e.currState,i.getNewCommand());e.clearStrategyCommand(a),e.getDisplayRangeCommand(a),e.setScrollPosCmd(a),e.showPageCommand(a),e.cacheImgCommand(a),a.start()};this.addCalcCommand(t,a)},setCacheCmd:function(){var t="cacheImg",e=this,a=function(){e.commandType=t;var a=(e.currState,i.getCurrCommand());e.cacheImgCommand(a),a.start()};this.addCalcCommand(t,a)},setScrollCmd:function(){var t="scroll",e=this,a=function(){e.currState.type=e.commandType=t;var a=i.getNewCommand();e.setScrollPosCmd(a),e.showPageCommand(a),e.cacheImgCommand(a),a.start()};this.addCalcCommand(t,a)},setClearScrollCmd:function(){var t="clearScroll",e=this,a=function(){e.currState.type=e.commandType=t;var a=(e.currState,i.getCurrCommand());e.cachePage=[],a.clear()};this.addCalcCommand(t,a)},setMorePageCmd:function(){var t="morePage",e=this,a=function(){e.currState.type=e.commandType=t;var a=(e.currState,i.getNewCommand());e.setMoreCmd(a),a.start()};this.addCalcCommand(t,a)}})});
;define("searchresult:widget/ui/strategy/singleton/FilterStrategy/FilterStrategy.js",function(e,t,a){var r=e("searchresult:widget/ui/strategy/FilterStrategy/FilterStrategy.js"),l=e("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),u={},s=BD.IMG.tplConf.queryClassFlag;if("14"==s)u={s:{defaultValue:"0",currValue:"0",emptyValue:"1"},width:{defaultValue:BD.IMG.tplConf.wpaperWidth||0,currValue:"0",emptyValue:"0"},height:{defaultValue:BD.IMG.tplConf.wpaperHeight||0,currValue:"0",emptyValue:"0"}};else if("104"===s){var i=l.getTplConfItem("rootStep")||"";u={step_word:{defaultValue:i,currValue:i,emptyValue:i}}}a.exports=new r({},u)});
;define("searchresult:widget/ui/strategy/singleton/ImgStrategy/ImgStrategy.js",function(t,e,g){{var r=t("searchresult:widget/ui/strategy/ImgStrategy/ImgStrategy.js");g.exports=new r}});
;define("searchresult:widget/ui/strategy/singleton/PageStrategy/PageStrategy.js",function(e,t,a){{var g=e("searchresult:widget/ui/strategy/PageStrategy/PageStrategy.js");a.exports=new g}});
;define("searchresult:widget/ui/strategy/singleton/SMEStrategy/SMEStrategy.js",function(e,t,s){{var r=e("searchresult:widget/ui/strategy/SMEStrategy/SMEStrategy.js"),a=e("searchresult:widget/ui/base/ParamsBus/ParamsBus.js");s.exports=new r(a.getTplConfItem("sme"))}});
;define("searchresult:widget/ui/strategy/singleton/DisplayStrategy/DisplayStrategy.js",function(t,e,s){{var a=t("searchresult:widget/ui/strategy/PullDisplayStrategy/PullDisplayStrategy.js");s.exports=new a}});
;define("searchresult:widget/ui/strategy/singleton/ScrollStrategy/ScrollStrategy.js",function(t,e,r){{var l=t("searchresult:widget/ui/strategy/ScrollStrategy/ScrollStrategy.js");r.exports=new l}});
;define("searchresult:widget/ui/strategy/singleton/resultPullStrategyHostOpt/resultPullStrategyHostOpt.js",function(t,e,a){var s=t("searchresult:widget/ui/model/singleton/ImageDataManager/ImageDataManager.js"),r=t("searchresult:widget/ui/model/singleton/PageDataManager/PageDataManager.js"),g=t("searchresult:widget/ui/strategy/PullStrategyHostOpt/PullStrategyHostOpt.js"),l=new g;l.setImgStore(s),l.setPageStore(r),l.ini(),a.exports=l});
;define("searchresult:widget/ui/view/ViewClass/ViewClass.js",function(e,t,i){var n=e("common:widget/ui/jquery/jquery.js");BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.ViewClass=i.exports=function(){},n.extend(BD.IMG.ViewClass.prototype,{ini:function(){},render:function(){},remove:function(){},setState:function(e){var t=this.state;if(t)for(var i in t)t[i]=e[i]},getCurrentFilterNum:function(){var e=n("#filter");if(e.length>0){var t=n(".filter-on",e);return t.length}return-100}})});
;define("searchresult:widget/ui/view/PullImageViewOpt/PullImageViewOpt.js",function(t,i,e){var a=t("common:widget/ui/jquery/jquery.js"),s=t("common:widget/ui/EventEmitter/EventEmitter.js"),n=t("searchresult:widget/ui/view/ViewClass/ViewClass.js"),r=t("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),o=t("searchresult:widget/ui/base/utils/utils.js"),l=t("searchresult:widget/ui/base/statistic/statistic.js"),m=t("searchresult:widget/ui/base/StaticGlobalConf/StaticGlobalConf.js"),h=(t("searchresult:widget/ui/fragment/PageImageLoad/PageImageLoad.js"),t("searchresult:widget/fcAd/fcAd.js")),d=r.getTplConfItem("queryClassFlag"),c="104"===d;BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.PullImageView=e.exports=function(t){var i={IMG_SET_TPL:['<li {{=it.liStyle}} {{=it.lastLine}} class="pullImgli {{=it.liClass}}">','<div class="album" {{=it.albumStyle1}}></div>','<div class="album" {{=it.albumStyle2}}></div>','<div class="album" {{=it.albumStyle3}}>','<div class="album" {{=it.albumStyle4}}>',"<a name='pn{{=it.pageNum}}' href=\"/i?ct=503316480&z={{=it.z}}&tn=baiduimagedetail&ipn=d&word={{=it.queryWordEnc}}&step_word={{=it.stepWordEnc}}&ie={{=it.ie}}&in={{=it.currentIndex}}&cl={{=it.cl}}&lm={{=it.lm}}&st={{=it.st}}&cs={{=it.cs}}&os={{=it.os}}&pn={{=it.pageNum}}&rn=1&di={{=it.di}}&ln={{=it.listnum}}&fr={{=it.fr}}&fmq={{=it.fmq}}&ic={{=it.ic}}&s={{=it.s}}&se={{=it.se}}&sme={{=it.sme}}&tab={{=it.tab}}&width={{=it.width}}&height={{=it.height}}&face={{=it.face}}&is={{=it.is}}&istype={{=it.istype}}&ist={{=it.source_type}}&jit={{=it.jit}}&objurl={{=it.comObjURL}}&adpicid={{=it.adPicId}}\""," {{=it.aStyle}} target=\"_blank\" onclick=\"storeData( '{{=it.objURL}}', {{=it.pageNum}});p(event,0,{ist:'{{=it.source_type}}',sr:'{{=it.bdSrcType}}',u:'{{=it.objURL}}',f:'{{=it.fromURL}}',cs:'{{=it.cs}}',t:1, rts:'{{=it.rts}}'});\" >",'<img class="img-hover" data-cs="{{=it.cs}}" data-pn="{{=it.pageNum}}" data-origin="{{=it.objURL}}" data-furl="{{=it.fromURL}}" data-desc="{{=it.desc}}" data-saved="0"  data-height="{{=it.iheight}}" data-issmall="{{=it.isSmallImgset}}" data-imgsetnum="{{=it.bdSetImgNum}}" data-clickStr="storeData( \'{{=it.objURL}}\', {{=it.pageNum}});p(event,0,{ist:\'{{=it.source_type}}\',sr:\'{{=it.bdSrcType}}\',u:\'{{=it.objURL}}\',f:\'{{=it.fromURL}}\',cs:\'{{=it.cs}}\',t:1});" data-width="{{=it.iwidth}}" name=\'pn{{=it.pageNum}}\' bdsrc="{{=it.thumbURL}}" data-hover="{{=it.hoverURL}}" data-mid="{{=it.middleURL}}" data-large="{{=it.largeTnImageUrl}}" src="{{=it.matchURL}}"  {{=it.imgStyle}} onload="bdImgRecT({type:\'load\',pn:\'{{=it.pageNum}}\',self:this},{{=it.cachePage}});" onerror="bdImgRecT({type:\'error\',pn:\'{{=it.pageNum}}\',self:this},{{=it.cachePage}});"/>',"</a>",'<div class="digest" {{=it.digestStyle}} title="  {{=it.fromURLHost}}  &#13;{{=it.iwidth}}x{{=it.iheight}} {{=it.type}} {{=it.filesizeString1}}">',"<a class='fromURL' name='pn{{=it.pageNum}}' href={{=it.fromURL}}       onclick=\"p(event,1,{ist:'{{=it.source_type}}',sr:'{{=it.bdSrcType}}',u:'{{=it.objURL}}',f:'{{=it.fromURL}}',cs:'{{=it.cs}}',t:1});\" target=\"_blank\" >{{=it.fromPageTitle}}</a>","<span class='hover-extra-info' id='fpn{{=it.pageNum}}'>","<span class='{{=it.sizePositionClass}}'  >","{{=it.iwidth}}x{{=it.iheight}} {{=it.filesizeString2}} {{=it.sourceTypeString}}","</span>",'<a target="_blank" href="/i?tn=download&ipn=dwnl&word={{=it.queryWordEnc}}&ie=utf-8&fr=result&url={{=it.comObjURL}}" class="downloadicon"></a>',"</span>","</div>",'<div class="imgSetInfo" {{=it.infoStyle}}><div class="imgSetBg"></div><div style="position:relative;z-index:10;">{{=it.bdSetImgNum}}</div></div>',"</div>","</div>","</li>"].join(""),IMG_TPL:['<li {{=it.liStyle}} {{=it.lastLine}} class="pullImgli {{=it.liClass}}">','<div id="div_{{=it.ThumbContentSign}}" class="imgShow" {{=it.imgShowStyle}}>',"<a name='pn{{=it.pageNum}}' href=\"/i?ct=503316480&z={{=it.z}}&tn=baiduimagedetail&ipn=d&word={{=it.queryWordEnc}}&step_word={{=it.stepWordEnc}}&ie={{=it.ie}}&in={{=it.currentIndex}}&cl={{=it.cl}}&lm={{=it.lm}}&st={{=it.st}}&cs={{=it.cs}}&os={{=it.os}}&pn={{=it.pageNum}}&rn=1&di={{=it.di}}&ln={{=it.listnum}}&fr={{=it.fr}}&&fmq={{=it.fmq}}&ic={{=it.ic}}&s={{=it.s}}&se={{=it.se}}&sme={{=it.sme}}&tab={{=it.tab}}&width={{=it.width}}&height={{=it.height}}&face={{=it.face}}&is={{=it.is}}&istype={{=it.istype}}&ist={{=it.source_type}}&jit={{=it.jit}}&objurl={{=it.comObjURL}}&adpicid={{=it.adPicId}}\" "," {{=it.aStyle}} target=\"_blank\" onclick=\"storeData( '{{=it.objURL}}', {{=it.pageNum}});p(event,0,{ist:'{{=it.source_type}}',sr:'{{=it.bdSrcType}}',u:'{{=it.objURL}}',f:'{{=it.fromURL}}',cs:'{{=it.cs}}',t:1, asp:{{=it.aspSign}}, rts:'{{=it.rts}}'});\" >",'<img id="img_{{=it.ThumbContentSign}}" class="img-hover" data-cs="{{=it.cs}}" data-pn="{{=it.pageNum}}" data-picId="{{=it.ThumbContentSign}}" data-surl="{{=it.fromURLHost}}"','data-originalUrl="/i?ct=503316480&z={{=it.z}}&tn=baiduimagedetail&ipn=d&word={{=it.queryWordEnc}}&step_word={{=it.stepWordEnc}}&ie={{=it.ie}}&in={{=it.currentIndex}}&cl={{=it.cl}}&lm={{=it.lm}}&st={{=it.st}}&cs={{=it.cs}}&pn={{=it.pageNum}}&rn=1&di={{=it.di}}&ln={{=it.listnum}}&fr={{=it.fr}}&&fmq={{=it.fmq}}&ic={{=it.ic}}&s={{=it.s}}&se={{=it.se}}&sme={{=it.sme}}&tab={{=it.tab}}&width={{=it.width}}&height={{=it.height}}&face={{=it.face}}&is={{=it.is}}&istype={{=it.istype}}&ist={{=it.source_type}}&jit={{=it.jit}}&objurl={{=it.comObjURL}}" ',' data-aspdianjing="{{=it.isAspDianjing}}" data-origin="{{=it.objURL}}" data-furl="{{=it.fromURL}}" data-thumburl="{{=it.thumbURL}}"  data-desc="{{=it.desc}}" data-saved="0" data-height="{{=it.iheight}}" data-width="{{=it.iwidth}}" data-clickStr="storeData( \'{{=it.objURL}}\', {{=it.pageNum}});p(event,0,{ist:\'{{=it.source_type}}\',sr:\'{{=it.bdSrcType}}\',u:\'{{=it.objURL}}\',f:\'{{=it.fromURL}}\',cs:\'{{=it.cs}}\',t:1, asp:{{=it.aspSign}}, rts:\'{{=it.rts}}\'});" name=\'pn{{=it.pageNum}}\' bdsrc="{{=it.thumbURL}}" data-hover="{{=it.hoverURL}}" data-mid="{{=it.middleURL}}" data-large="{{=it.largeTnImageUrl}}" src="{{=it.matchURL}}"  {{=it.imgStyle}} onload="bdImgRecT({type:\'load\',pn:\'{{=it.pageNum}}\',self:this},{{=it.cachePage}});" onerror="bdImgRecT({type:\'error\',pn:\'{{=it.pageNum}}\',self:this},{{=it.cachePage}});"/>',"</a>",'<div class="digest" {{=it.digestStyle}}  title="  {{=it.fromURLHost}}  &#13;{{=it.iwidth}}x{{=it.iheight}} {{=it.type}} {{=it.filesizeString1}}">',"<a class='fromURL' name='pn{{=it.pageNum}}' href={{=it.fromURL}}       onclick=\"p(event,1,{ist:'{{=it.source_type}}',sr:'{{=it.bdSrcType}}',u:'{{=it.objURL}}',f:'{{=it.fromURL}}',cs:'{{=it.cs}}',t:1});\" target=\"_blank\" >{{=it.fromPageTitle}}</a>","<span class='hover-extra-info' id='fpn{{=it.pageNum}}'>","<span class='{{=it.sizePositionClass}}'  >","{{=it.iwidth}}x{{=it.iheight}} {{=it.filesizeString2}} {{=it.sourceTypeString}}","</span>",'<a target="_blank" href="/i?tn=download&ipn=dwnl&word={{=it.queryWordEnc}}&ie=utf-8&fr=result&url={{=it.comObjURL}}" class="downloadicon"></a>',"</span>","</div>","{{=it.timeInfo}}","</div>","</li>"].join(""),PROMOTE_IMG_TPL:['<li {{=it.liStyle}} {{=it.lastLine}} class="pullImgli {{=it.liClass}}">','<div id="div_{{=it.ThumbContentSign}}" class="imgShow" {{=it.imgShowStyle}}>',"<a name='pn{{=it.pageNum}}' href=\"{{=it.decodeFromURL}}\" "," {{=it.aStyle}} target=\"_blank\" onclick=\"p(event,202,{type:'{{=it.imgType}}',f:'{{=it.encodeFromURL}}'});\" >",'<img id="img_{{=it.ThumbContentSign}}" class="img-promote" data-picId="{{=it.ThumbContentSign}}" data-surl="{{=it.fromURLHost}}"','data-originalUrl="/i?ct=503316480&z={{=it.z}}&tn=baiduimagedetail&ipn=d&word={{=it.queryWordEnc}}&step_word={{=it.stepWordEnc}}&ie={{=it.ie}}&in={{=it.currentIndex}}&cl={{=it.cl}}&lm={{=it.lm}}&st={{=it.st}}&cs={{=it.cs}}&pn={{=it.pageNum}}&rn=1&di={{=it.di}}&ln={{=it.listnum}}&fr={{=it.fr}}&&fmq={{=it.fmq}}&ic={{=it.ic}}&s={{=it.s}}&se={{=it.se}}&sme={{=it.sme}}&tab={{=it.tab}}&width={{=it.width}}&height={{=it.height}}&face={{=it.face}}&is={{=it.is}}&istype={{=it.istype}}&ist={{=it.source_type}}&jit={{=it.jit}}&objurl={{=it.comObjURL}}" ',' data-aspdianjing="{{=it.isAspDianjing}}" data-origin="{{=it.objURL}}" data-furl="{{=it.fromURL}}" data-thumburl="{{=it.thumbURL}}"  data-desc="{{=it.desc}}" data-saved="0" data-height="{{=it.iheight}}" data-width="{{=it.iwidth}}" data-clickStr="storeData( \'{{=it.objURL}}\', {{=it.pageNum}});p(event,0,{ist:\'{{=it.source_type}}\',sr:\'{{=it.bdSrcType}}\',u:\'{{=it.objURL}}\',f:\'{{=it.fromURL}}\',cs:\'{{=it.cs}}\',t:1, asp:{{=it.aspSign}}, rts:\'{{=it.rts}}\'});" name=\'pn{{=it.pageNum}}\' bdsrc="{{=it.thumbURL}}" data-hover="{{=it.hoverURL}}" data-mid="{{=it.middleURL}}" data-large="{{=it.largeTnImageUrl}}" src="{{=it.matchURL}}"  {{=it.imgStyle}} onload="bdImgRecT({type:\'load\',pn:\'{{=it.pageNum}}\',self:this},{{=it.cachePage}});" onerror="bdImgRecT({type:\'error\',pn:\'{{=it.pageNum}}\',self:this},{{=it.cachePage}});"/>',"</a>","{{=it.timeInfo}}","</div>",'<p class="digest" title="  {{=it.fromURLHost}}  &#13;{{=it.iwidth}}x{{=it.iheight}} {{=it.type}} {{=it.filesizeString1}}">',"<a class='fromURL' name='pn{{=it.pageNum}}' href={{=it.fromURL}}       onclick=\"p(event,1,{ist:'{{=it.source_type}}',sr:'{{=it.bdSrcType}}',u:'{{=it.objURL}}',f:'{{=it.fromURL}}',cs:'{{=it.cs}}',t:1});\" target=\"_blank\" >{{=it.fromPageTitle}}</a>","<span class='hover-extra-info' id='fpn{{=it.pageNum}}'>","<span class='fromURLHost' >","{{=it.fromURLHostName}}","</span>","<span class='{{=it.sizePositionClass}}'  >","{{=it.iwidth}}x{{=it.iheight}} {{=it.filesizeString2}} {{=it.sourceTypeString}}","</span>","</span>","</p>","</li>"].join(""),PROMOTE_IMG_SIGN:"p99",IMG_LINE_HEIGHT:196,IMG_MARGIN:15,IMG_PADDING:3,PAGE_NUM_HEIGHT:m.get("pageNumHeight")||52};this.state={querySign:null,type:null,currPageStartPn:null,currPageEndPn:null,currImgLineWidth:null,currPageLineNum:null,cacheStartPn:null,cacheEndPn:null,cachePage:null,cachePageLineNum:null},this.$container=null,this.firstRander=!1,this.checkImgTimeout=0,this.spaceImgNum=0,this.smallImg=0,this.smallThumbImg=0,this.ie=r.getTplConfItem("ie"),this.isShowFirst=!1,this.dianjingTimer=null,n.apply(this,[]),this.options=a.extend({},i,t||{})},a.inherits(BD.IMG.PullImageView,n),a.extend(BD.IMG.PullImageView.prototype,{ini:function(t){this.$container=a("#"+t),this.imgFormat=doT.compile(this.options.IMG_TPL),this.imgsetFormat=doT.compile(this.options.IMG_SET_TPL),this.imgPromoteFormat=doT.compile(this.options.PROMOTE_IMG_TPL)},render:function(t,i,e){var a=new Image,s=0,n=0,r=(new Date).getTime(),o=0;a.onerror=function(){n=-1,o=(new Date).getTime(),s=o-r,l(null,501,{imgsrc:encodeURIComponent(i[0].thumbURL),ls:n,tt:s}),a=null},a.onload=function(){o=(new Date).getTime(),s=o-r,l(null,501,{imgsrc:encodeURIComponent(i[0].thumbURL),ls:n,tt:s}),a=null},30*Math.random()<=3&&(i[0]?a.src=i[0].thumbURL:{}),this._showImg(t,i,e),this.setState(t)},_showImg:function(t,i){var e=t.cacheStartPn,n=t.cacheEndPn,m=t.currImgLineWidth,d=(t.cachePageLineNum,t.querySign),g=t.type,p=this.options,u=p.IMG_PADDING,f=this,b=this.ie,I=[];$container=this.$container;var y=p.PROMOTE_IMG_SIGN;if(this.spaceImgNum=0,this.smallImg=0,this.smallThumbImg=0,"scroll"===t.type||"preShow"===t.type||"ini"===t.type||d==this.state.querySign&&m==this.state.currImgLineWidth||(window.scrollTo(0,0),$container.empty().css("height","auto"),this.isClear=!0),i&&0!=i.length){if(h&&h.insertBtAdModel&&h.insertBtAdModel(t,i),0==i[0].pageNum){for(var w="",R=0;R<i.length;R++)w+=""==i[R].cs?"0,0$"+encodeURIComponent(BD.IMG.utils.codeCompiler.uncompileURL(i[R].objURL))+"|":i[R].cs+"$"+encodeURIComponent(BD.IMG.utils.codeCompiler.uncompileURL(i[R].objURL))+"|";l(null,57,{cs:w,pn:i[0].pageNum})}this.isShowFirst=!0;var L=r.getGlobalConfs();if(L.fmq=o.fmqValueSet(),L.tab||0==parseInt(L.tab)||(L.tab=L.tab||""),L.listnum=parseInt(r.getGlobalConfItem("listNum")),L.ie=b,L.bq&&""!=L.bq&&(L.queryWordEnc=encodeURIComponent(L.bq),L.ie="utf8"),c&&L.step_word){var S=encodeURIComponent(o.decodeURIComponent(L.step_word));L.queryWordEnc=S,L.stepWordEnc=S,L.ie="utf-8"}else L.step_word="";s.eventCenter.trigger("view.imgRenderStart",{from:e,to:n,dispType:g,page:t.cachePage,startPn:e,endPn:n}),$container.css("width",m+"px"),BD.IMG.tplConf.isInteract&&"must"==BD.IMG.tplConf.isInteract&&$container.css("width",m-165+"px");var v=Math.max(i.pageHeight,0),x=Math.max(i.pageTop,0);$container.css("height",Math.max(parseInt($container.css("height"))||0,v+x+(t.cachePage<=1?0:this.options.PAGE_NUM_HEIGHT))+"px"),this.dispNum=i.length,a.browser.ie&&6==parseInt(a.browser.version)&&(this.checkImgTimeout=setTimeout(function(){f.checkImg()},1e3));var U,T,P,_=[];P=document.createElement("div"),P.setAttribute("id","imgPage"+t.cachePage),P.style.cssText="position:absolute;top:"+x+"px;width:100%;",_.push('<h2 class="pageNum '+(t.cachePage<=1?"pageNumhidden":"")+'">'+t.cachePage+"</h2>"),_.push('<ul class="pageCon" style="position:relative;height:'+v+'px">');for(var R=0,N=this.dispNum;N>R;R++){U=i[R];var j;if(void 0!=U)if("SME"!=U.type&&"tuji"!=U.imgType&&"fixedcar"!=U.imgType&&"special"!=U.imgType&&"xiaomi"!=U.imgType)if("FCAD"==U.type&&h&&h.getItemHTML)j=h.getItemHTML(U),_.push(j);else if(U.matchURL&&U.offset){U.hoverURL&&(T=U.hoverURL.match(/u=(\d+,\d+)/i))&&(U.ThumbContentSign=T[1],I.push(T[1])),this._isSpaceImg(U.objURL,U.fromURL)&&this.spaceImgNum++;var M,C=U;if(a.extend(C,L),C.cachePage=t.cachePage,C.fromURLHostName=C.fromURLHost.replace(/^http[s]?:\/\//,""),C.comObjURL=encodeURIComponent(o.uncompile(C.objURL)),C.sizePositionClass="imgSizeInfo",C.redirectURL="/i?tn=redirect&ipn=rdt&word=j&url="+encodeURIComponent(C.fromURL),C.filesizeString1="",C.filesizeString2="",C.sourceTypeString="",C.rts=C.pageNum<10&&C.matchURL.indexOf("fm=59")>=0&&C.fromPageTitle.indexOf("<strong>")<0?1:0,U.imgType!=y&&U.bdSetImgNum>0){var E=6,G=3;C.liClass="imgset",C.isSmallImgset=0;var D=C.offset,H=Math.max((C.liHeight-E-2*G-D.height)/2,0),z=C.liHeight-E-2*G;C.liStyle="style='position:absolute;top:"+C.top+"px;left:"+C.left+"px;width:"+C.liWidth+"px;height:"+C.liHeight+"px;'",C.imgStyle="style='width:"+D.width+"px;height:"+D.height+"px;visibility:hidden;'",C.imageInfo=C.iwidth+"x"+C.iheight+" <em>|</em>  "+C.filesize+"KB",C.aStyle="style='display:block;width:"+D.width+"px;height:"+D.height+"px;margin-top:"+H+"px; margin-left:"+(C.liWidth-E-2*G-D.width)/2+"px;'",C.albumStyle4="style='width:"+(C.liWidth-E-2*G)+"px;height:"+(C.liHeight-E-2*G)+"px;top:"+G+"px;left:"+G+"px;border:none;'",C.albumStyle1="style='width:"+(C.liWidth-E)+"px;height:"+(C.liHeight-E)+"px;top:"+(1+u)+"px;left:"+(1+u)+"px;border-color:#cacaca;z-index:3;'",C.albumStyle2="style='width:"+(C.liWidth-E)+"px;height:"+(C.liHeight-E)+"px;top:"+(3+u)+"px;left:"+(3+u)+"px;border-color:#dfdfdf;z-index:2;'",C.albumStyle3="style='position:relative;width:"+(C.liWidth-E)+"px;height:"+(C.liHeight-E)+"px;top:0px;left:0px;border-color:#b8b8b8;z-index:4;'",z-H-D.height>20?(C.infoStyle="style='bottom:0px;right:0px;'",C.isSmallImgset=1):C.infoStyle="style='bottom:"+Math.max((C.liHeight-E-2*G-D.height)/2,0)+"px;right:"+Math.max((C.liWidth-E-2*G-D.width)/2,0)+"px;'",M=this.imgsetFormat}else{C.aspSign=1===C.isAspDianjing?1:0,C.liClass="";var D,W=parseInt(C.liWidth),q=parseInt(C.liHeight);D=C.offset,C.liStyle="style='position:absolute;top:"+C.top+"px;left:"+C.left+"px;width:"+W+"px;height:"+q+"px;'",C.imgShowStyle="style='height:"+q+"px;'",C.imgStyle="style='width:"+parseInt(D.width)+"px;height:"+parseInt(D.height)+"px;'",C.imageInfo=4==parseInt(L.s)?C.bdImgnewsDate:C.iwidth+"x"+C.iheight+" <em>|</em>  "+C.filesize+"KB",C.aStyle="style='width:"+parseInt(D.width)+"px;height:"+parseInt(D.height)+"px;margin-top:"+Math.max((q-D.height)/2,0)+"px; margin-left:"+(C.liWidth-D.width)/2+"px;'",C.digestStyle="style='width:"+Math.min(W,parseInt(D.width))+"px;margin-left:"+(W>parseInt(D.width)?(C.liWidth-D.width)/2:0)+"px;'";var k=this._timeCalculate(((new Date).getTime()-o.parseDate(U.bdImgnewsDate.replace(/-/g,"/")).getTime())/36e5);C.timeInfo=k&&parseInt(D.width)>60&&1*U.di!=0?'<span class="img-hover img-time" style="right:'+Math.max(W-(W-D.width)/2-parseInt(D.width),0)+"px;bottom:"+Math.max(q-parseInt(D.height)-Math.max((q-D.height)/2,0),0)+'px;"  >'+k+'</span><span class="img-hover img-time img-timebg" style="right:'+Math.max(W-(W-D.width)/2-parseInt(D.width),0)+"px;bottom:"+Math.max(q-parseInt(D.height)-Math.max((q-D.height)/2,0),0)+'px;" >'+k+"</span>":"",U.imgType!=y?M=this.imgFormat:(M=this.imgPromoteFormat,C.decodeFromURL=o.uncompile(C.fromURL),C.encodeFromURL=encodeURIComponent(C.decodeFromURL),C.aStyle="style='width:"+parseInt(D.width)+"px;height:"+parseInt(D.height)+"px;margin-top:"+Math.max((q-D.height)/2,0)+"px; margin-left:"+parseInt((C.liWidth-D.width)/2*.7)+"px;'")}C.desc=C.fromPageTitle.replace(/<\/?[^>]*>/g,"").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),j=M(C),_.push(j);var D=C.offset;"2"==C.hasLarge&&this.smallThumbImg++,D.height<C.iheight&&D.height<C.liHeight-2&&this.smallImg++}else this.dispNum--;else this.dispNum--;else s.eventCenter.trigger("runTimeException",["data not Exist!index:"+(R+1)]),this.dispNum--}s.eventCenter.trigger("view.imgRenderSet",{dispNum:this.dispNum,spaceImgNum:this.spaceImgNum,smallThumbImg:this.smallThumbImg,smallImg:this.smallImg,page:t.cachePage}),_.push("</ul>"),P.innerHTML=_.join(""),$container.append(P),this.addEvent(),1==t.cachePage&&setTimeout(function(){s.eventCenter.trigger("FIRST_PAGE_READY")},10),s.eventCenter.trigger("AFTER_SHOW_IMG",{imageIds:I,page:t.cachePage}),I.length>0&&(1==t.cachePage&&(window.imageList=I),clearTimeout(this.dianjingTimer),this.dianjingTimer=setTimeout(function(){I.length>30&&(I=I.slice(0,30)),s.eventCenter.trigger("SHOW_IMAGE_PROMOTION",{imageIds:I,page:t.cachePage})},10))}},_isSpaceImg:function(t,i){try{var e=/[http,https]:\/\/([^\/]*)/,a=t.match(e)[1],s=i.match(e)[1];return a.match(/hiphotos.baidu.com/)&&s.match(/hi.baidu.com/)?!0:!1}catch(n){return!1}},_timeCalculate:function(t){var i;return 1>t?i="1":24>t?i=Math.round(t)+"":192>t&&(i=Math.round((t-t%24)/24)+""),i},checkImg:function(){for(var t=this.$container,i=this,e=0,a=t[0].getElementsByTagName("img"),s=0,n=a.length;n>s;s++){var r=a[s],o=r.getAttribute("bdsrc");-1!=r.fileSize||r.isDisplayed||o==r.src||r.isChanged||(e++,r.isChanged=!0,r.src=r.src)}e>0&&(this.checkImgTimeout=setTimeout(function(){i.checkImg()},1e3))},getStringPx:function(t){if(!t)return 0;var i=12;t=t.replace(/\<[\/]?\w+\>/g,"").replace(/\.\.\./g,"").replace(/[0-9a-zA-Z\|_\s\?\.\(\)"']{2}/g,"");var e=0;return e=t.length*i},recT:function(){},remove:function(){},addEvent:function(){var t=0,i=0,e=0,s=0,n=0,r=0;a("#imgContainer .pullImgli").each(function(){a(this).unbind().hover(function(){a(this).find("div.digest").stop().animate({bottom:0},100),t=(new Date).getTime()},function(){if(a(this).find("div.digest").stop().animate({bottom:-68},100),i=(new Date).getTime()-(t+400),!(0>=i||0==t)){var l=a(this).find(".img-hover");s=l.attr("data-cs"),e=l.attr("data-pn"),n=o.uncompile(l.attr("data-origin")),r=o.uncompile(l.attr("data-furl")),p(null,29,{vtime:i,pn:e,cs:s,u:n,f:r})}})})}})});
;define("searchresult:widget/ui/view/PullSMEView/PullSMEView.js",function(t,e,i){BD=window.BD||{},BD.IMG=BD.IMG||{};{var s=t("common:widget/ui/jquery/jquery.js"),n=t("searchresult:widget/ui/view/ViewClass/ViewClass.js"),a=t("searchresult:widget/ui/base/ParamsBus/ParamsBus.js");t("searchresult:widget/ui/base/utils/utils.js"),t("searchresult:widget/ui/base/statistic/statistic.js")}BD.IMG.PullSMEView=i.exports=function(t){this.defaultOpts={SME_WIDTH:165,SME_HEIGHT:169},this.container=null,this.SMEContainer=null,this.options=s.extend({},this.defaultOpts,t||{})},s.inherits(BD.IMG.PullSMEView,n),s.extend(BD.IMG.PullSMEView.prototype,{ini:function(t,e){this.SMEContainer=document.getElementById(e||"smeContainer"),this.container=document.getElementById(t||"imgid")},render:function(t,e){var i=parseInt(a.getGlobalConfItem("sme"));if(i>0&&this.SMEContainer&&this.container)for(var s=this.SMEContainer.getElementsByTagName("dl"),n=this.options.SME_WIDTH,l=this.options.SME_HEIGHT,o=0,r=0,u=e.length;u>o&&o<s.length;o++){var d=e[o];if(d.pageNum>=0)break;if("SME"==d.type){var h=s[e[o].smeIndex].cloneNode(!0);h.className+=h.className+" pull-sme",h.style.position="absolute",h.style.top=d.top+"px";var p=Math.max((d.liHeight+4-l)/2,0),m=Math.min(Math.max((d.liWidth+8-n)/2,0),5);h.style.left=d.left+5-m-(n-d.liWidth-8)/2+"px",h.style.paddingTop=h.style.paddingBottom=p+"px",h.style.paddingLeft=h.style.paddingRight=m+"px",this.container.appendChild(h),r++}}}})});
;define("searchresult:widget/ui/view/singleton/ImageViewOpt/ImageViewOpt.js",function(e,i,t){var w=e("searchresult:widget/ui/view/PullImageViewOpt/PullImageViewOpt.js"),s=t.exports=new w;BD=window.BD||{},BD.dispI=s});
;define("searchresult:widget/ui/view/BrowserHotRs/BrowserHotRs.js",function(t,e,i){BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.view=BD.IMG.view||{};var s=t("common:widget/ui/jquery/jquery.js"),n=t("searchresult:widget/ui/base/Timeline/Timeline.js"),h=t("searchresult:widget/ui/view/ViewClass/ViewClass.js"),l=t("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),a=t("searchresult:widget/ui/base/statistic/statistic.js"),r=parseInt(s.browser.version),d=[],u=function(t,e){var i=1*t.style.left.replace("px","")||0,o=e.left-i,s=n({rander:function(e){t.style.left=o*e+i+"px"},end:e.end,duration:e.duration||300});s.init(),s.launch()},c=function(t,e){var i=1*t.style.opacity;i||(i=1),"none"==t.style.display&&(i=0),o=e.opacity-i;var h=n({rander:function(e){var n=e*o;!s.browser.ie||s.browser.ie&&r>=9?(t.style.opacity=i+n,t.style.KHTMLOpacity=i+n):s.browser.ie&&r>=7&&(t.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:"+Math.floor(100*(i+n))+")"),i+n>0?(t.style.display="block",s.browser.ie&&9>r&&r>=7&&(t.style.filter="")):0>=i+n&&(t.style.display="none",s.browser.ie&&9>r&&r>=7&&(t.style.filter=""))},end:e.end,duration:e.duration||200});h.init(),h.launch()},p=function(t,e,i){var o=t.clientWidth||t.offsetWidth,h=t.clientHeight,l=1*s(e).css("marginTop").replace("px",""),a=i.width-o,r=i.height-h,d=n({rander:function(i){t.style.width=o+a*i+"px",t.style.height=h+r*i+"px",e.style.marginTop=l-r*i/2+"px"},end:i.end,duration:i.duration||200});d.init(),d.launch()},m=function(t,e){var i=t.clientHeight,o=e.height-i,s=n({rander:function(e){t.style.height=i+o*e+"px"},end:e.end,duration:e.duration||200});s.init(),s.launch()},g=function(t){return t.replace(/[:"'<>\s]/g,"")},w=BD.IMG.BrowserHotRs=i.exports=function(t){this.defaultOpts={width:800,height:192,padding:10,tpl:'<div id="hotword-boxa"><a id="hotword-prev"></a><a id="hotword-next"></a><div id="hotword-album"></div><div id="hotword-menu"><div id="hotword-menu-title"></div><div id="hotword-menu-list"></div></div></div><div id="hotword-boxb"><div id="hotword-no"></div><div id="hotword-title"></div><a id="hotword-showall"></a></div><div class="imgListTitle"></div>',boxPadding:10},this.container=null,this.album=null,this.options=s.extend({},this.defaultOpts,t||{}),this.ai=0,this.pi=0,this.sa=!1,this.url="/i?ct=503316480&z=&tn=baiduimagedetail&ipn=d&ie=utf-8&cl=2&lm=-1&st=-1&rn=1&di=&ic=0&s=&se=1&sme=0&tab=&width=&height=&face=0&is=&istype=2&ist=&jit=&objurl=&ln="+l.getTplConfItem("listNum")};s.inherits(w,h),s.extend(w.prototype,{ini:function(){var t=this,e=l.getTplConfItem("queryWord"),i=[];this.container=document.getElementById("browser-hotword");for(var o in hotWordResult)hotWordResult[o].photos&&hotWordResult[o].photos.length>0&&(g(e)==g(hotWordResult[o].flag)||g(e)==g(hotWordResult[o].query)?0==d.length:i.length<8&&i.push(hotWordResult[o]));if(0==d.length)return void(this.container.style.display="none");for(;i.length>0&&d.length<=9;){var n=Math.floor(Math.random()*i.length);i[n]&&(d.push(i[n]),i.splice(n,1))}var h=this.defaultOpts.tpl;this.container.innerHTML=h,this.album=document.getElementById("hotword-album"),this.menu=document.getElementById("hotword-menu"),this.prevBtn=document.getElementById("hotword-prev"),this.nextBtn=document.getElementById("hotword-next"),this.showall=document.getElementById("hotword-showall"),s(this.prevBtn).on("click",function(e){t.focus(t.pi-1),a(e,69,{type:"prev"})}),s(this.nextBtn).on("click",function(e){t.focus(t.pi+1),a(e,69,{type:"next"})}),s(this.showall).on("click",function(){t.sa?t.hideAllTitle():t.showAllTitle()}),s(this.album).on("click",function(e){t.focusHandle(e)}),a(null,69,{type:"FirstPv"}),BD.IMG.tplConf.BrowserHotRs=!0,this.container.style.display="block"},render:function(){0!=d.length&&(this.pi=0,this.showAlbum(this.ai),this.showMenu())},showMenu:function(){for(var t=(document.getElementById("hotword-menu-list"),""),e=0;e<d.length&&9>e;e++){var i="";if(d[e].photos.length){var o=d[e].photos[0],s=this.imgSize(o,125,125);i='<img src="'+d[e].photos[0].mid_url+'" width="'+s.width+'" height="'+s.height+'"style="left:'+(125-s.width)/2+'px" >'}var n=d[e].url;""==n&&(n="/i?tn=baiduimage&ct=201326592&fr=hotword&hotindex=1&lm=-1&cl=2&nc=1&ie=utf-8&word="+encodeURIComponent(d[e].flag)),t+='<a class="hotword-menu-item" onclick="p(null,69,{type:\'menuhref\'});" ai="'+e+'" href="'+n+'" >'+i+'<span class="title">'+(d[e].query||d[e].flag)+"</span></a>"}document.getElementById("hotword-menu-list").innerHTML=t,this.menu.style.display="none"},showAlbum:function(t){this.ai=t;var e='<a target="_blank" class="img-item {{=it.className}}" data-len="{{=it.len}}" data-word="{{=it.flag}}" style="margin-top:{{=it.marginTop}}px;" pn="{{=it.pn}}"><img style="width:{{=it.w}}px;height:{{=it.h}}px;" src="{{=it.large_url}}" /></a>',i=doT.template(e),o=[],s=d[t],n=s.photos.length,h=s.flag,l=0;for(var a in s.photos){var r=this.imgSize(s.photos[a]),u=this.imgSize(s.photos[a],370);s.photos[a].imgWidth=r.width,s.photos[a].imgHeight=r.height,s.photos[a].hoverWidth=u.width,s.photos[a].hoverHeight=u.height,s.photos[a].w=0==a?u.width:r.width,s.photos[a].h=0==a?u.height:r.height,s.photos[a].marginTop=0==a?-15:10,s.photos[a].className=0==a?"active":"",s.photos[a].pn=a,s.photos[a].left=l,s.photos[a].len=n,s.photos[a].flag=h,l+=r.width+10,o.push(i(s.photos[a]))}o=o.join(""),this.album.innerHTML=o,this.album.style.left="0px",this.album.style.width=l+750+"px",this.showTitle(0),this.showNo(0),this.prevBtn.style.display="none"},imgSize:function(t,e,i){e=e||320,i=i||100;var o=t.width,s=t.height;return o=o*e/s,s=e,i>o&&(s=s*i/o,o=i),{width:o,height:s}},focusHandle:function(t){var e,i,o,n,h=t.srcElement||t.target,r=h;("img"===h.tagName.toLowerCase()||"a"===h.tagName.toLowerCase())&&("a"==h.tagName?h=s("img",h):r=r.parentNode,s(r).hasClass("active")&&(n=parseInt(r.getAttribute("data-len")),e=l.getTplConfItem("queryWord"),i=parseInt(r.getAttribute("pn")),o=this.url+"&word="+encodeURIComponent(e)+"&pn="+(i-n),window.open(o,"_blank"),a(null,69,{type:"zhongjianye"})),this.focus(h),a(t,69,{type:"focusImg"}))},focus:function(t){var e,i;if("number"==typeof t)i=t,e=this.album.children[i],t=e.children[0];else{if(e=t.parentNode,s(e).hasClass("active"))return;i=1*s(e).attr("pn")}this.pi=i,s(".active",this.album).length>0&&this.blur(s(".active",this.album)[0]),s(e).addClass("active");var o=d[this.ai].photos[i];p(t,e,{width:o.hoverWidth,height:o.hoverHeight}),this.scrollTo(1*i),this.showNo(1*i),this.showTitle(1*i)},showNo:function(t){document.getElementById("hotword-no").innerHTML='<span class="red">'+(t+1)+"</span>/"+d[this.ai].photos.length},showTitle:function(t){var e=document.getElementById("hotword-title"),i=document.getElementById("hotword-boxb"),o=d[this.ai].photos[t].summary,s=d[this.ai].photos[t].fromurl;(!s||s.length<2)&&(s=d[this.ai].fromurl),(!o||o.length<2)&&(o=d[this.ai].query),e.style.width="0px",e.innerHTML='<a href="'+s+'" target="_blank">'+o+"</a>";var n=e.clientHeight-27;e.clientHeight>30?(this.showall.style.display="block",this.sa?m(i,{height:n+55}):m(i,{height:55})):(m(i,{height:n+55}),this.showall.style.display="none")},scrollTo:function(t){var e=d[this.ai].photos.length,i=d[this.ai].photos[t],o=-i.left+(this.container.clientWidth||this.container.offsetWidth)/2-i.hoverWidth/2-50;o>0&&(o=0);var s=d[this.ai].photos[e-1],n=s.left+s.imgWidth+10-(this.container.clientWidth||this.container.offsetWidth)+i.hoverWidth-i.imgWidth+10;-n>o&&(o=-n);var h=this;t==e-1?(o-=620,setTimeout(function(){c(h.menu,{opacity:1})},200),this.nextBtn.style.display="none",a(null,69,{type:"showmenu"})):(this.menu.style.display="none",this.nextBtn.style.display="block"),this.prevBtn.style.display=0==t?"none":"block",u(this.album,{left:o})},switchAlbumHandle:function(t){var e=t.srcElement||t.target;if("img"===e.tagName.toLowerCase()||"a"===e.tagName.toLowerCase()){"a"==e.tagName&&(e=s("img",e));var i=e.parentNode,o=1*s(i).attr("ai");this.switchAlbum(o)}},switchAlbum:function(t){this.menu.style.display="none",this.showAlbum(t)},blur:function(t){s(t).removeClass("active");var e=s("img",t)[0],i=s(t).attr("pn"),o=d[this.ai].photos[i];p(e,t,{width:o.imgWidth,height:o.imgHeight})},hideAllTitle:function(){this.sa=!1,this.showall.innerHTML="",this.showall.className="",m(document.getElementById("hotword-boxb"),{height:55}),a(null,69,{type:"hideTitle"})},showAllTitle:function(){this.sa=!0,this.showall.innerHTML="",this.showall.className="hideall";var t=1*document.getElementById("hotword-title").clientHeight-27;m(document.getElementById("hotword-boxb"),{height:t+55}),a(null,69,{type:"showTitle"})}})});
;define("searchresult:widget/ui/view/BrowserRs/BrowserRs.js",function(t,e,i){BD=window.BD||{},BD.IMG=BD.IMG||{},BD.IMG.view=BD.IMG.view||{};var s=t("common:widget/ui/jquery/jquery.js"),n=t("searchresult:widget/ui/base/Timeline/Timeline.js"),r=t("searchresult:widget/ui/view/ViewClass/ViewClass.js"),l=t("searchresult:widget/ui/base/ParamsBus/ParamsBus.js"),a=t("searchresult:widget/ui/base/statistic/statistic.js"),h=parseInt(s.browser.version),d=[],u=[],c={},m=function(t,e){var i=1*t.style.left.replace("px","")||0,s=e.left-i,o=n({rander:function(e){t.style.left=s*e+i+"px"},end:e.end,duration:e.duration||300});o.init(),o.launch()},g=function(t,e){var i=1*t.style.opacity;i||(i=1),"none"==t.style.display&&(i=0),o=e.opacity-i;var r=n({rander:function(e){var n=e*o;!s.browser.ie||s.browser.ie&&h>=9?(t.style.opacity=i+n,t.style.KHTMLOpacity=i+n):s.browser.ie&&h>=7&&(t.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:"+Math.floor(100*(i+n))+")"),i+n>0?(t.style.display="block",s.browser.ie&&9>h&&h>=7&&(t.style.filter="")):0>=i+n&&(t.style.display="none",s.browser.ie&&9>h&&h>=7&&(t.style.filter=""))},end:e.end,duration:e.duration||200});r.init(),r.launch()},p=function(t,e,i){var o=t.clientWidth||t.offsetWidth,r=t.clientHeight,l=1*s(e).css("marginTop").replace("px",""),a=i.width-o,h=i.height-r,d=n({rander:function(i){t.style.width=o+a*i+"px",t.style.height=r+h*i+"px",e.style.marginTop=l-h*i/2+"px"},end:i.end,duration:i.duration||200});d.init(),d.launch()},w=function(t,e){var i=t.clientHeight,s=e.height-i,o=n({rander:function(e){t.style.height=i+s*e+"px"},end:e.end,duration:e.duration||200});o.init(),o.launch()},f=function(t){return t.replace(/[:"'<>\s]/g,"")},y=BD.IMG.BrowserRs=i.exports=function(t){this.defaultOpts={width:800,height:192,padding:10,tpl:'<div id="browserRs-boxa"><a id="browserRs-prev"></a><a id="browserRs-next"></a><div id="browserRs-album"></div><div id="browserRs-menu"><div id="browserRs-menu-title"></div><div id="browserRs-menu-list"></div></div></div><div id="browserRs-boxb"><div id="browserRs-no"></div><div id="browserRs-title"></div><a id="browserRs-showall"></a></div><div class="imgListTitle"></div>',boxPadding:10},this.container=null,this.album=null,this.options=s.extend({},this.defaultOpts,t||{}),this.ai=0,this.pi=0,this.sa=!1,this.url="/i?ct=503316480&z=&tn=baiduimagedetail&ipn=d&ie=utf-8&cl=2&lm=-1&st=-1&rn=1&di=&ic=0&s=&se=1&sme=0&tab=&width=&height=&face=0&is=&istype=2&ist=&jit=&objurl=&ln="+l.getTplConfItem("listNum")};s.inherits(y,r),s.extend(y.prototype,{ini:function(){var t=this,e=l.getTplConfItem("queryWord"),i=[];this.container=document.getElementById("specialQuery");var n=!1,o=0,r={},h=!1;if(void 0!=BD.IMG.simgs&&BD.IMG.simgs.length&&(h=!0),void 0!==typeof BD.IMG.browserRsData&&!h){r=BD.IMG.browserRsData.photos||[];for(var m=0,g=r.length;g>m;m++)if(o+=r[m].width,o>1200){n=!0;break}}for(var m in hotWordResult)hotWordResult[m].photos&&hotWordResult[m].photos.length>0&&(f(e)==f(hotWordResult[m].flag)||f(e)==f(hotWordResult[m].query)?0==u.length:i.length<8&&i.push(hotWordResult[m]));for(;i.length>0&&u.length<=9;){var p=Math.floor(Math.random()*i.length);i[p]&&(u.push(i[p]),i.splice(p,1))}if(void 0===typeof BD.IMG.browserRsData||0!=BD.IMG.browserRsData.Status||!n)return void(this.container.style.display="none");d=BD.IMG.browserRsData.photos,c=BD.IMG.browserRsData,this.container.style.display="block";var w=this.defaultOpts.tpl;this.container.innerHTML=w,this.album=document.getElementById("browserRs-album"),this.menu=document.getElementById("browserRs-menu"),this.prevBtn=document.getElementById("browserRs-prev"),this.nextBtn=document.getElementById("browserRs-next"),this.showall=document.getElementById("browserRs-showall"),s(this.prevBtn).on("click",function(e){t.focus(t.pi-1),a(e,70,{type:"prev"})}),s(this.nextBtn).on("click",function(e){t.focus(t.pi+1),a(e,70,{type:"next"})}),s(this.showall).on("click",function(){t.sa?t.hideAllTitle():t.showAllTitle()}),s(this.album).on("click",function(e){t.focusHandle(e)}),a(null,70,{type:"FirstPv"}),BD.IMG.tplConf.BrowserRs=!0,this.hide()},render:function(){0!=d.length&&(this.pi=0,this.showAlbum(this.ai),this.showMenu(),this.hide())},hide:function(){this.container.style.display="none"},showMenu:function(){for(var t=(document.getElementById("browserRs-menu-list"),""),e=0;e<u.length&&9>e;e++){var i="";if(u[e].photos.length){var s=u[e].photos[0],n=this.imgSize(s,125,125);i='<img src="'+u[e].photos[0].mid_url+'" width="'+n.width+'" height="'+n.height+'"style="left:'+(125-n.width)/2+'px" >'}var o=u[e].url;""==o&&(o="/i?tn=baiduimage&ct=201326592&fr=hotword&hotindex=1&lm=-1&cl=2&nc=1&ie=utf-8&word="+encodeURIComponent(u[e].flag)),t+='<a class="browserRs-menu-item" onclick="p(null,70,{type:\'menuhref\'});" ai="'+e+'" href="'+o+'" >'+i+'<span class="title">'+(u[e].query||u[e].flag)+"</span></a>"}document.getElementById("browserRs-menu-list").innerHTML=t,this.menu.style.display="none"},showAlbum:function(t){this.ai=t;var e='<a target="_blank" class="img-item {{=it.className}}" data-len="{{=it.len}}" data-word="{{=it.flag}}" style="margin-top:{{=it.marginTop}}px;" pn="{{=it.pn}}"><img style="width:{{=it.w}}px;height:{{=it.h}}px;" src="{{=it.url}}" /></a>',i=doT.template(e),s=[],n=d,o=0;for(var r in n){var l=this.imgSize(n[r]),a=this.imgSize(n[r],370),h=n.length;n[r].imgWidth=l.width,n[r].imgHeight=l.height,n[r].hoverWidth=a.width,n[r].hoverHeight=a.height,n[r].w=0==r?a.width:l.width,n[r].h=0==r?a.height:l.height,n[r].marginTop=0==r?-15:10,n[r].className=0==r?"active":"",n[r].pn=r,n[r].left=o,n[r].len=h,o+=l.width+10,s.push(i(n[r]))}s=s.join(""),this.album.innerHTML=s,this.album.style.left="0px",this.album.style.width=o+750+"px",this.showTitle(0),this.showNo(0),this.prevBtn.style.display="none"},imgSize:function(t,e,i){e=e||320,i=i||100;var s=t.width,n=t.height;return s=s*e/n,n=e,i>s&&(n=n*i/s,s=i),{width:s,height:n}},focusHandle:function(t){var e,i,n,o,r=t.srcElement||t.target,h=r;("img"===r.tagName.toLowerCase()||"a"===r.tagName.toLowerCase())&&("a"==r.tagName?r=s("img",r)[0]:h=h.parentNode,s(h).hasClass("active")&&(o=parseInt(h.getAttribute("data-len")),e=l.getTplConfItem("queryUrlWord"),i=parseInt(h.getAttribute("pn")),n=this.url+"&word="+e+"&pn="+(i-o),window.open(n,"_blank"),a(null,70,{type:"zhongjianye"})),this.focus(r),a(t,70,{type:"focusImg"}))},focus:function(t){var e,i;if("number"==typeof t)i=t,e=this.album.children[i],t=e.children[0];else{if(e=t.parentNode,s(e).hasClass("active"))return;i=1*e.getAttribute("pn")}if(this.pi=i,s(".active",this.album).length>0){this.blur(s(".active",this.album)[0]),s(e).addClass("active");var n=d[i];p(t,e,{width:n.hoverWidth,height:n.hoverHeight}),this.scrollTo(1*i),this.showNo(1*i),this.showTitle(1*i)}},showNo:function(t){document.getElementById("browserRs-no").innerHTML='<span class="red">'+(t+1)+"</span>/"+d.length},showTitle:function(t){var e=document.getElementById("browserRs-title"),i=document.getElementById("browserRs-boxb"),s=d[t].summary;s||(s=c.query);var n=/^http/.test(d[t].from_url)?d[t].from_url:"http://"+d[t].from_url;e.style.width="0px",e.innerHTML='<a href="'+n+'" target="_blank">'+s+"</a>";var o=e.clientHeight-27;e.clientHeight>30?(this.showall.style.display="block",this.sa?w(i,{height:o+55}):w(i,{height:55})):(w(i,{height:o+55}),this.showall.style.display="none")},scrollTo:function(t){var e=d.length,i=d[t],s=-i.left+(this.container.clientWidth||this.container.offsetWidth)/2-i.hoverWidth/2-50;s>0&&(s=0);var n=d[e-1],o=n.left+n.imgWidth+10-(this.container.clientWidth||this.container.offsetWidth)+i.hoverWidth-i.imgWidth+10;-o>s&&(s=-o);var r=this;t==e-1?(s-=620,setTimeout(function(){g(r.menu,{opacity:1})},200),this.nextBtn.style.display="none",a(null,70,{type:"showmenu"})):(this.menu.style.display="none",this.nextBtn.style.display="block"),this.prevBtn.style.display=0==t?"none":"block",m(this.album,{left:s})},switchAlbumHandle:function(t){var e=t.srcElement||t.target;if("img"===e.tagName.toLowerCase()||"a"===e.tagName.toLowerCase()){"a"==e.tagName&&(e=s("img",e));var i=e.parentNode,n=1*i.getAttribute("ai");this.switchAlbum(n)}},switchAlbum:function(t){this.menu.style.display="none",this.showAlbum(t)},blur:function(t){s(t).removeClass("active");var e=s("img",t)[0],i=t.getAttribute("pn"),n=d[i];p(e,t,{width:n.imgWidth,height:n.imgHeight})},hideAllTitle:function(){this.sa=!1,this.showall.innerHTML="",this.showall.className="",w(document.getElementById("browserRs-boxb"),{height:55}),a(null,70,{type:"hideTitle"})},showAllTitle:function(){this.sa=!0,this.showall.innerHTML="",this.showall.className="hideall";var t=1*document.getElementById("browserRs-title").clientHeight-27;w(document.getElementById("browserRs-boxb"),{height:t+55}),a(null,70,{type:"showTitle"})}})});